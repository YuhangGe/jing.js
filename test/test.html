<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <script type="text/javascript" src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript">
        function log() {
            console.log.apply(console, arguments);
        }

        function cm(name, parent) {
            var __m = {};

            Object.defineProperty(__m, 'name', {
                writable: false,
                value : name
            });

            Object.defineProperty(__m, 'parent', {
                writable : false,
                value : parent ? parent : null
            });
            Object.defineProperty(__m, 'root', {
                get : function() {
                    return this.parent ? this.parent.root : this;
                }
            });

            return __m;
        }


        $(function() {
            var m1 = cm('1');
            var m2 = cm('2', m1);
            var m3 = cm('3', m2);

            log(m3.root.name);

        });
    </script>
</head>
<body>

</body>
</html>