/*** jing.js(https://github.com/YuhangGe/jing.js) ***/

!function(){function a(a){p(__jing_config,a)}function b(a,b){if("undefined"==typeof a||"undefined"==typeof b)throw console.trace(),"inherit error!";for(var c in b.prototype){var d=a.prototype[c];"undefined"==typeof d&&(a.prototype[c]=b.prototype[c])}if(a.__base_objects__=[],a.__base_objects__.push(b),"undefined"!=typeof b.__base_objects__)for(var e=0;e<b.__base_objects__.length;e++)a.__base_objects__.push(b.__base_objects__[e]);a.prototype.base=function(b){var c=null,d=void 0;return"undefined"==typeof this.__inherit_base_deep__?this.__inherit_base_deep__=0:this.__inherit_base_deep__++,c=a.__base_objects__[this.__inherit_base_deep__],d="undefined"==typeof b||null==b?c.call(this):b instanceof Array==!0?c.apply(this,b):c.apply(this,[].slice.call(arguments)),this.__inherit_base_deep__--,d},a.prototype.callBase=function(b,c){var d=null,e=void 0;"undefined"==typeof this.__inherit_deep__?this.__inherit_deep__=0:this.__inherit_deep__++,d=a.__base_objects__[this.__inherit_deep__];var f=d.prototype[b];if("function"!=typeof f)throw"There is no method:"+b+" in baseClass";return e="undefined"==typeof c||null===c?f.call(this):c instanceof Array==!0?f.apply(this,c):f.apply(this,[].slice.call(arguments,1)),this.__inherit_deep__--,e}}function c(a,b){for(var c in b)a[c]=b[c]}function d(a,b){return function(){b.apply(a,arguments)}}function e(a,b,c,d,e){Object.defineProperty(a,b,{value:c,writable:d?!0:!1,enumerable:__jing_config.debug?!0:e?!0:!1})}function f(a,b){return a.hasOwnProperty(b)}function g(a,b,c,d,e,f){var g={configurable:e?!0:!1,enumerable:f?!0:!1};c&&(g.get=c),d&&(g.set=d),Object.defineProperty(a,b,g)}function h(){console.log.apply(console,arguments)}function i(a){"complete"===document.readyState?a():document.addEventListener("DOMContentLoaded",a)}function j(a){if(!a)throw __jing_config.debug&&console.trace(),"$assert failure!"}function k(a,b,c){function d(a){var b,c,e,f=a;if(E(a)||D(a))for(f=[],e=D(a)?a:a[sc].arr,b=0;b<e.length;b++)f.push(d(e[b]));else if(B(a)){f={};for(c in a)c!==xc&&c!==sc&&(f[c]=d(a[c]))}return f}function e(a){if(E(a)&&(a=a[sc].arr),D(a))for(var b=0;b<a.length;b++)a[b]=e(a[b]);else if(B(a))for(var c in a)a[c]=e(a[c]);return a}return a=__jing_config.debug?d(a):e(a),qc(a,b,c)}function l(a){p(a,{method:"get",type:"json",data:{}}),new XMLHttpRequest}function m(a,b){for(var c=a.length,d=new Array(c),e=0;c>e;e++)d[e]=b(a[e],e);return d}function n(a,b){for(var c=0;c<a.length;c++)if(b(a[c],c)===!1)return}function o(a,b){function c(a,b){for(var c in b)if(a[c]!==b[c])return!1;return!0}var d,e=a;if(A(b))e=a.filter(b);else if(B(b))for(e=[],d=0;d<a.length;d++)c(a[d],b)&&e.push(a[d]);return e}function p(a,b){if(!b)return a;for(var c in b)a[c]=b[c];return a}function q(a){return a.slice()}function r(a,b){var c,d,e=a.parentNode;e===b.parentNode&&(d=b.previousElementSibling,d?c=!0:(d=b.nextElementSibling,c=!1),e.insertBefore(b,a),d!==a&&(c?e.insertBefore(a,d):e.appendChild(a)))}function s(a,b,c){a.addEventListener(b,c)}function t(a,b){b.parentNode.insertBefore(a,b)}function u(a){a.parentNode.removeChild(a)}function v(a){return document.querySelectorAll(a)}function w(a,b,c){return"undefined"==typeof c?a.getAttribute(b):void a.setAttribute(b,c)}function x(a,b){if(!(b instanceof Array))return a.hasAttribute(b);for(var c=0;c<b.length;c++)if(!a.hasAttribute(b[c]))return!1}function y(a,b){a.removeAttribute(b)}function z(a){return"string"==typeof a}function A(a){return"function"==typeof a}function B(a){return null!==a&&"object"==typeof a}function C(a){return"undefined"==typeof a}function D(a){return Array.isArray(a)}function E(a){return a instanceof Q}function F(){return(rc++).toString(36)}function G(a,b){e(this,sc,{prop:d(this,H),listeners:{},id:F(),name:a,children:{},parent:b?b:tc}),e(this,xc,{})}function H(a,b){if(B(a))for(var c in a)this[c]=a[c];else this[a]=b}function I(a,b){var c=a[sc].children,d=new G(b,a);return c[b]=d,d}function J(a,b,c,e,f){this.id=F(),this.route=b,this.path=b.join("."),this.env=a,this.deep=e,this.array=!1,this.handler=c,this.tm=null,this.deal=d(this,this._deal),this.data=f,this.destroied=!1,this.cv=null,this.pv=null}function K(a){var b=a[sc].arr,c=a[sc].up,d=a[sc].ets,e=a[xc],g=!1;for(var h in d){g=!0;break}for(var i=b.length-1;i>=c;i--){if(e&&g&&!f(e,i)){var j=e[i]={};for(var k in d)j[k]={index:yc,emitter:d[k]}}ab(a,i)}a[sc].up=b.length}function L(a,b,c){for(var d in b){var e=b[d];M(a,e.index,e.emitter,c)}}function M(a,b,c,d){var e=a[sc].ets,f=c.route.length,g=c.id;(b===yc||b===f-1||b===f-2&&"length"===c.route[f-1])&&(c.array=d,d?e[g]=c:delete e[g])}function N(a,b,c,d){if(B(c)){var e=a[sc].ets;for(var f in e){var g=e[f];g.deep&&(d?Z(c,g):$(c,g.id))}}}function O(a){var b=a[sc].ets;for(var c in b)b[c].notify()}function P(a,b){var c=a[xc],d=c[b];if(d)for(var e in d){var f=d[e];f.emitter.notify()}}function Q(a){E(a)?a=a[sc].arr:D(a)||(a=[]),e(this,sc,{arr:a,ets:{},up:0}),K(this),e(this,xc,{})}function R(a,b,c){this.id=F(),this.handler=b,this.emitters=a,this.data=c,this.pv=null,this.cv=null,this.tm=null,this.destroied=!1,this.dg=d(this,this._deal),this.changes=[]}function S(a,b,c,d,e){this.base(a,d,e),this.cache=b,this.items=c,this.vc=!1}function T(a,b,c,d,e,f){this.base(a,e,f),this.expr=c,this.var_tree=b,this.env=d,this.changes=[]}function U(a){function b(a){a&&a.cached!==!1&&(a.cached=!1,b(a.parent))}a.cached=!1,b(a.parent)}function V(a,b,c){g(a,b,function(){return c},function(a){if(c!==a){j(f(this,xc));var d=this[xc][b];j(d),D(a)&&(a=new Q(a));var e,g,h,i,k=E(a),l=E(c);for(e in d)g=d[e],h=g.index,i=g.emitter,i.notify(),k&&M(a,h,i,!0),l&&M(c,h,i,!1),_(h,i,c,a);c=a}},!0,!0)}function W(a,b,c,d,e){for(;b<c.length;b++){var g,h,i,k=c[b];if(e?(g=Y(d),h=X(g,k),j(!f(h,a.id)),h[a.id]={index:b,emitter:a},i=d[k],D(i)&&(i=new Q(i)),E(i)&&M(i,b,a,!0),V(d,k,i)):(g=d[xc])&&(h=g[k])&&f(h,a.id)&&delete h[a.id],!f(d,k)||!B(d=d[k]))return void 0}return d}function X(a,b){var c=a[b];return c||(c=a[b]={}),c}function Y(a){var b=a[xc];return b||(b={},e(a,xc,b)),b}function Z(a,b){var c=a[xc];c||(c={},e(a,xc,c));var d=E(a);for(var g in a)if(g!==xc&&g!==sc&&(!d||/^\d+$/.test(g))){var h=a[g],i=X(c,g);j(!f(i,b.id)),i[b.id]={index:yc,emitter:b},D(h)&&(h=new Q(h)),V(a,g,h),B(h)&&Z(h,b)}}function $(a,b){var c=a[xc],d=b.id;if(c)for(var e in c){var f=c[e];delete f[d]}E(a)&&M(a,yc,b,!1);for(var g in a)if(g!==xc){var h=a[g];B(h)&&$(h,b)}}function _(a,b,c,d){var e=b.route,f=d;a<e.length-1&&(B(c)&&W(b,a+1,e,c,!1),B(d)&&(f=W(b,a+1,e,d,!0))),b.deep&&B(c)&&$(c,b.id),b.deep&&B(f)&&Z(f,b)}function ab(a,b){g(a,b,function(){return this[sc].arr[b]},function(a){var c=this[sc].arr[b];if(c!==a){if(D(a)&&(a=new Q(a)),j(f(this,xc)),f(this[xc],b)){var d=this[xc][b];j(d),d.notify(),_(b,d,c,a,!0)}this[sc].arr[b]=a}},!0,!0)}function bb(a,b,c){var d,f,g,h,i,j,k=a;for(d=0;d<b.length&&B(k);d++)f=b[d],h=E(k),g=h?k[sc].arr[f]:k[f],D(g)&&(g=new Q(g),h&&(k[sc].arr[f]=g)),i=k[xc],i||(i={},e(k,xc,i)),j=i[f],j||(j=i[f]={}),j[c.id]={index:d,emitter:c},E(g)&&M(g,d,c,!0),h?ab(k,f):V(k,f,g),k=g;d===b.length&&c.deep&&B(k)&&Z(k,c),c._init()}function cb(a){return a.replace(/\s*\]\s*\[\s*/g,".").replace(/\s*\]\s*\.\s*/g,".").replace(/\s*\[\s*/g,".").replace(/\s*\]\s*/g,"")}function db(a,b,c,d,e){var f=cb(b),g=m(f.split("."),function(a){return a=a.trim(),/^\d+$/.test(a)?parseInt(a):a});if(0===g.length)throw new Error("$watch wrong format");if(a=a.$find(g[0]),!a)throw new Error("variable "+g[0]+" not found!");var h=new J(a,g,c,d?!0:!1,e);return bb(a,g,h),a[sc].listeners[h.id]=h,h}function eb(a){a.destroy()}function fb(a,b,c){function d(a,c){var f=a.nodes[1];return"constant"===f.type&&(c.push(f.value),a.parent&&"property"===a.parent.type)?void d(a.parent,c):void b.push(e)}if("variable"===a.type){var e=[a.var_name];a.parent&&"property"===a.parent.type&&d(a.parent,e),b.push(e);var f=e.join("."),g=c[f];g||(g=c[f]=[]),g.indexOf(a)<0&&g.push(a)}else for(var h=0;h<a.nodes.length;h++)fb(a.nodes[h],b,c)}function gb(a,b,c,d){var e=[],f={},g={};if(fb(b,e,f),0!==e.length){for(var h,i,j=new T(g,f,b,a,c,d),k=0;k<e.length;k++){var l=e[k];if(i=a.$find(l[0]),!i)throw new Error("variable "+l[0]+" not found!");h=new J(i,l,j),bb(i,l,h),g[h.id]=h}return j.cv=j.pv=b.exec(a),a[sc].listeners[j.id]=j,j}}function hb(a,b){var c={};e(this,"__",c),e(c,"factories",{}),e(c,"directives",{}),e(c,"runs",[]),e(c,"controllers",{}),e(c,"datasources",{}),e(c,"config",{}),e(this,"parent",b?b:null),e(this,"children",{}),e(this,"name",a)}function ib(a,b){for(var c,d=a.split("."),e=zc,f=0;f<d.length-1;f++){if(c=e[d[f]],!c)throw"require error: module "+a+" not found.";e=c.children}var g=c?c:b,h=d[d.length-1],i=g.factory(h);if(!i)throw"require error: factory "+a+" not found.";return i}function jb(a){for(var b,c=a.split("."),d=zc,g=null,h=0;h<c.length-1;h++)b=d[c[h]],b||(b=new hb(c[h],g),e(d,c[h],b,!1,!0)),d=b.children,g=b;var i=c[c.length-1];return f(d,i)?d[i]:(b=new hb(i,g),e(d,i,b),b)}function kb(a,b){var c=a.trim().split(".");if(!b&&c.length<=1)return null;for(var d,e=b?c.length:c.length-1,f=0;e>f;f++)if(d=0===f?zc[c[f]]:d.children[c[f]],!d)return null;return b?d:[d,c[c.length-1]]}function lb(a,b,c){this.name=b,this.module=a,this.func=c}function mb(a,b,c){this.name=b,this.module=a,this.state=0,this.func=c,this.link_func=null}function nb(){console.time("ttt");var a,b,c,d;for(a in Cc)if(b=Cc[a],!b.init){for(c=b.module.__.runs,d=0;d<c.length;d++)c[d].call(b.env,b.module,b.env);mc(b.ele,b.module,b.env),jc(),b.init=!0}console.timeEnd("ttt")}function ob(a){var b=cc(a),c=Cc[b];return c?c.env:null}function pb(a,b){var c=cc(b),d=Cc[c];if(d)throw"element can't be driven more than once";d={init:!1,env:new G(c),ele:b,module:a},Cc[c]=d}function qb(a){function b(a,b){Ec[a]=b,Fc[b.module.path+"."+a]=b}var c=a.name;if(D(c))for(var d=0;d<c.length;d++)b(c[d],a);else b(c,a)}function rb(a){if(0===a.state){a.state=999;var b=a.func(a.module);a.state=1,a.link_func=b}}function sb(a,b){qb(new mb(Ac,a,b))}function tb(){}function ub(a,b,c,d){var e,f=b.removeNamedItem("j-env"),g=f.value.trim();if(g.indexOf(".")>=0){var h=kb(g,!1);if(!h)throw'j-env: environment "'+g+'" not found. module not found.';e=h[0].env(h[1])}else e=c.env(g);if(!e)throw'j-env: environment "'+g+'" not found.';e.func.call(d,c,d)}function vb(a,b,c){this.ele=a,this.module=b,this.env=c}function wb(a,b,c,d){var e=b.removeNamedItem("j-include"),f=e.value,g=Gb(f),h=g.exec(d);if(!z(h))throw"j-include need string.";var i=new vb(a,c,d);directive_put_inner(a,i),i.run(h)}function xb(a,b,c,e){this.ele=a,this.env=b,this.expr=c;var f=gb(b,c,function(a,b,c){c.update(a)},this);this.val=f.cv,this.val_key="value",this.val_event="input";var g=w(a,"type");switch(g){case"checkbox":this.val_key="checked",this.val_event="change"}this.ele[this.val_key]=this.val,e&&s(a,this.val_event,d(this,this.change))}function yb(a,b,c,d,e,f){if("INPUT"===d.nodeName){var g=Gb(e,!1);if("variable"!==g.type&&"property"!==g.type)throw"j-model only support settable expression";new xb(d,c,g,f)}}function zb(a,b,c){this.ele=a,this.used=!1,this.env=b,this.val=c}function Ab(a,b,c,d,e,f){this.ele=a,this.cmt=document.createComment(a.outerHTML),this.env=e,this.expr=f,this.attr=b,this.key=d,this.module=c,this.frag=document.createDocumentFragment();var g=gb(e,f,function(a,b,c){c.update(a)},this);this.items=[],this.index_map=new Map,t(this.cmt,a),u(a),this.render(g.cv)}function Bb(a,b,c){a.$prop={$index:b,$first:0===b,$odd:b%2!==0,$even:b%2===0,$last:b===c-1,$middle:0!==b&&b!==c-1}}function Cb(a,b,c){var d=a.get(b);d||(d=[],a.set(b,d)),d.push(c)}function Db(a,b,c,d){var e=b.removeNamedItem("j-repeat"),f=e.value,g=Gb(f,!0);if("in"!==g.type)throw"j-repeat format wrong!";new Ab(a,b,c,g.nodes[0],d,g.nodes[1])}function Eb(a,b){this.type=a,this.nodes=b?b:[],this.parent=null;for(var c=0;c<this.nodes.length;c++)this.nodes[c].parent=this;this.value=null,this.cached=!1,this.need_cached=!0}function Fb(a,d,e){a.prototype._exec=d,e&&c(a.prototype,e),b(a,Eb)}function Gb(a,b){Lc=!1,Mc=null,Nc=b?!0:!1,bc(a),Kb(),Lb();var c;return 0===Jc.length?c=new Wb:1===Jc.length?c=Jc[0]:(c=new Eb("root",q(Jc)),c.need_cached=Nc),Jc.length=0,null!==Mc&&("emp"===c.type||"root"===c.type?Hb():c=new Yb(Mc,c)),c}function Hb(){throw Jc=[],Kc=[],"parse error"}function Ib(a){switch(a){case";":Lb();break;case"(":Lc&&(Jb("F"),Kc.push("A"),Qb(new Wb)),Kc.push("(");break;case"[":Lc?(Jb("[]"),Kc.push("(")):(Kc.push("A"),Qb(new Wb),Kc.push("("));break;case")":case"]":Lb("(");break;case"+":case"-":case"++":case"--":Jb(Lc?"#"+a:a+"#");break;default:Jb(a)}Lc=")"===a||"]"===a}function Jb(a){for(var b,c,d=Oc[a];Kc.length>0&&(b=Kc[Kc.length-1],c=Oc[b],d[0]<c[0]||d[0]===c[0]&&0===d[1]);)Kc.pop(),Nb(b);Kc.push(a)}function Kb(){for(ac();!Rc;){switch(Pc){case"var":switch(Qc){case"true":case"false":Qb(new Vb("true"===Qc)),Lc=!0;break;case"in":if(0!==Kc.length||1!==Jc.length||"variable"!==Jc[0].type||null!==Mc)throw"grammar wrong: in";Mc=Jc.pop().var_name,Lc=!1;break;default:Qb(new _b(Qc)),Lc=!0}break;case"num":Qb(new Vb(Number(Qc))),Lc=!0;break;case"str":Qb(new Vb(Qc.substring(1,Qc.length-1))),Lc=!0;break;case"op":Ib(Qc)}ac()}}function Lb(a){for(var b=null;Kc.length>0&&(b=Kc.pop(),!a||b!==a);)Nb(b)}function Mb(){var a=Pb(),b=Pb(),c="."===Ob();if("array"===a.type){for(var d=!0,e=0;e<a.nodes.length;e++)if(!Rb(a.nodes[e])){d=!1;break}d&&(a=new Vb(a._exec()))}else if(!Rb(a))throw"parse_deal_op_F: something strange wrong.";c&&"variable"===b.type&&(b=new Vb(b.var_name));var f=new Xb(null,b,a);c&&(Kc.pop(),a=Pb(),Rb(a)&&Rb(f.nodes[1])&&Rb(f.nodes[2])?f=new Vb(a.value[f.nodes[1].value].apply(a.value,f.nodes[2].value)):(f.nodes[0]=a,a.parent=f)),Qb(f)}function Nb(a){var b,c,d;switch(a){case"F":Mb();break;case"A":for(b=Pb(),d=new Sb([]),c=!0;"empty"!==b.type;)d.nodes.unshift(b),b.parent=d,Rb(b)||(c=!1),b=Pb();c&&(d=new Vb(d._exec())),Qb(d);break;case",":break;case"[]":c=Pb(),b=Pb(),d=Rb(b)&&Rb(c)?new Vb(b.value[c.value]):new Zb(b,c),Qb(d);break;case".":c=Pb(),b=Pb(),c="variable"===c.type?new Vb(c.var_name):c,d=Rb(b)&&Rb(c)?new Vb(b.value[c.value]):new Zb(b,c),Qb(d);break;case"?":case":":c=Pb(),b=Pb(),Qb(new Ub(a,b,c));break;case"++#":case"--#":case"#++":case"#--":case"+#":case"-#":case"!":case"~":b=Pb(),d=new Tb(a,b),Rb(b)&&(d=new Vb(d.exec())),Qb(d);break;case"=":case"+=":case"-=":case"*=":case"/=":case"%=":case">>=":case">>>=":case"<<=":case"&=":case"^=":case"|=":c=Pb(),b=Pb(),d=new $b(a,b,c),Qb(d);break;case"#+":case"#-":case"*":case"/":case"%":case"<<":case">>":case">>>":case"==":case"===":case">":case"<":case"&":case"&&":case"|":case"||":case"!=":case"!==":case"^":c=Pb(),b=Pb(),d=new Tb(a,b,c),Rb(b)&&Rb(c)&&(d=new Vb(d.exec())),Qb(d)}}function Ob(){return Kc.length>0?Kc[Kc.length-1]:null}function Pb(){return 0===Jc.length&&Hb(),Jc.pop()}function Qb(a){a.need_cached=Nc,Jc.push(a)}function Rb(a){return"constant"===a.type}function Sb(a){this.base("array",D(a)?a:[a])}function Tb(a,b,c){this.base("calc",c?[b,c]:[b]),this.operator=a}function Ub(a,b,c){var d=[b];"?"===a&&"condition"===c.type?[].push.apply(d,c.nodes):d.push(c),this.base("condition",d)}function Vb(a){this.base("constant",[]),this.value=a,this.cached=!0}function Wb(){this.base("empty")}function Xb(a,b,c){this.base("function",[a?a:new Wb,b,c])}function Yb(a,b){this.base("in",[a,b])}function Zb(a,b){this.base("property",[a,b])}function $b(a,b,c){this.op=a,this.base("set",[b,c])}function _b(a){this.base("variable",[]),this.var_name=a}function ac(){if(!Rc){var a=Tc.exec(Sc);if(!a)return void(Rc=!0);Qc=a[0];var b=Qc.charCodeAt(0);Pc=39===b||34===b?"str":b>=48&&57>=b?"num":b>=97&&122>=b||b>=65&&90>=b||36===b||95===b?"var":"op"}}function bc(a){Sc=a,Tc.exec(""),Rc=!1}function cc(a){return a.id||(a.id="j.ele."+(Vc++).toString(36)),a.id}function dc(a){a.__is_p_stoped=!1,a.stopPropagation=function(){this.__is_p_stoped=!0}}function ec(a){return a.__is_p_stoped===!0}function fc(a){var b,c,d,e,g=a.type,h=a.target||a.srcElement||a.originalTarget,i=Uc.on;if(f(i,g))for(b=i[g],dc(a);!ec(a)&&h;){if(d=h.id,d&&f(b,d))for(c=b[d],e=0;e<c.length;e++)c[e].call(h,a);h=h.parentElement}}function gc(a,b,c){var d,e=cc(a),g=Uc.on;f(g,b)?d=g[b]:(d=g[b]={},s(document.body,b,fc));var h;h=f(d,e)?d[e]:d[e]=[],h.push(c)}function hc(a){var b=/^\s*(\w+)\s*:(.+)$/.match(a);return null===b?null:{on:b[1],expr:b[2]}}function ic(a,b){e(this,"name",a),e(this,"options",{direct:"s2c",type:"array"}),c(this.options,b);var d={};e(this,"__",d),d.listeners={change:[]};var f=this.options.type;d.value="object"===f?{}:"array"===f?[]:""}function jc(){for(var a,b=Xc,c=0;c<b.length;c++)a=b[c],a.pos.parentNode.insertBefore(a.ele,a.pos),a.pos=null,a.ele=null,delete b[c];b.length=0}function kc(a,b,c,d,e){rb(c);var f=c.link_func;f(b,c.module,d,a,e,c.name)}function lc(a,b,c,d){var e,f,g,h=d;if(f=b.getNamedItem("j-async-env"),null!==f)return void tb(a,b,c,h);if(f=b.getNamedItem("j-include"),null!==f)return void wb(a,b,c,h);if(f=b.getNamedItem("j-repeat"),null!==f)return void Db(a,b,c,h);for(f=b.getNamedItem("j-directive-name"),e=0;e<b.length;e++)f=b[e],g=Ec[f.name],g&&kc(a,c,g,h,f.value);f=b.getNamedItem("j-env"),null!==f&&(h=d.$child(f.value),ub(a,b,c,h));var i=a.childNodes;for(e=0;e<i.length;e++){var j=i[e];mc(j,c,h)}}function mc(a,b,c){switch(a.nodeType){case 1:lc(a,a.attributes,b,c),x(a,"j-cloak")&&y(a,"j-cloak");break;case 3:oc(a,c)}}function nc(a){function b(a){function b(a,c){return 0===c?new _b(a[c]):new Zb(b(a,c-1),new Vb(a[c]))}var c,d=f[a];return c=D(d)?b(d,d.length-1):B(d)?d:new Vb(d)}for(var c,d,e=0,f=[],g=!0;null!==(c=Zc.exec(a));)if(c.index>e&&f.push(a.substring(e,c.index)),e=c.index+c[0].length,d=c[1],Yc.test(d)){var h=cb(d),i=m(h.split("."),function(a){return a=a.trim(),/^\d+$/.test(a)?parseInt(a):a});f.push(i)}else g=!1,f.push(Gb(c[1],!0));if(0===f.length)return null;if(e<a.length&&f.push(a.substring(e)),g)return f;if(1===f.length)return f[0];var j,k=b(0);"constant"===k.type&&z(k.value)||(f.unshift(new Vb("")),k=f[0]);for(var l=1;l<f.length;l++)j=b(l),k="constant"===k.type&&"constant"===j.type?new Vb(k.value+j.value):new Tb("#+",k,j);return k}function oc(a,b){var c,d=a.textContent,e=nc(d);if(e){if(D(e))if(1===e.length){var f=e[0];if(b=b.$find(f[0]),!b)throw new Error("variable "+f[0]+" not found!");c=new J(b,f,pc,!1,a),bb(b,f,c)}else{var g=[],h={},i={};c=new S(i,h,g,pc,a),e.forEach(function(a){if(z(a))g.push({is_var:!1,value:a});else{var d=a.join(".");g.push({is_var:!0,value:d});var e=new J(b,a,c);bb(b,a,e),h[d]=e.cv,i[e.id]=e}}),c._init()}else{if("constant"===e.type)return void(a.textContent=e.value);c=gb(b,e,pc,a)}a.textContent=c.cv}}function pc(a,b,c){c.textContent=a}__jing_config={debug:!1};var qc=JSON.stringify;JSON.stringify=k;var rc=0,sc="__$jing0210$__",tc={$find:function(){return null},$get:function(){return void 0},$has:function(){return!1},$set:function(){},$parent:function(){return null}},uc=G.prototype;g(uc,"$id",function(){return this[sc].id}),g(uc,"$name",function(){return this[sc].name}),g(uc,"$children",function(){return this[sc].children}),e(uc,"$parse",function(a){return Gb(a)}),g(uc,"$root",function(){return this[sc].parent===tc?this:this[sc].parent.$root}),e(uc,"$destroy",function(){var a,b=this[sc],c=b.children;for(a in c)c[a].$destroy(),c[a]=null;b.children=null,b.parent=null;var d=this[xc];for(var e in d){var f=d[e],g=this[e];for(var h in f){var i=f[h];B(g)&&$(g,i.emitter),f[h]=null}d[e]=null}for(var j in b.listeners)eb(b.listeners[j])}),e(uc,"$child",function(a){var b=this[sc].children,c=new G(a,this);return b[c.$id]=c,c}),e(uc,"$parent",function(a){var b=this[sc];return b.parent===tc?null:C(a)?b.parent:b.parent.name===a?b.parent:b.parent.$parent(a)}),e(uc,"$require",function(a){var b=this.$parent(a);if(b)return b;throw new Error("Environment "+a+" not found.")}),e(uc,"$get",function(a){return f(this,a)?this[a]:(j(this[sc].parent),this[sc].parent.$get(a))}),e(uc,"$has",function(a){return f(this,a)?!0:this[sc].parent.$has(a)}),e(uc,"$find",function(a){return f(this,a)?this:this[sc].parent.$find(a)}),e(uc,"$set",function(a,b){f(this,a)?this[a]=b:this[sc].parent.$set(a,b)}),g(uc,"$prop",function(){return this[sc].prop},function(){H.apply(this,arguments)}),J.prototype={_init:function(){this.cv=this.pv=this._val()},_val:function(){for(var a=this.route,b=this.env.$get(a[0]),c=1,d=a.length;d>c;c++){if(!B(b))return void 0;b=b[a[c]]}return b},_deal:function(){this.cv=this._val(),(this.deep||this.array||this.cv!==this.pv)&&(A(this.handler)?this.handler(this.cv,this.pv,this.data):this.handler.notify(this.cv,this.pv,this.path),this.pv=this.cv)},notify:function(){"13"===this.id,this._ctm(),this.tm=setTimeout(this.deal,0)},_ctm:function(){null!==this.tm&&(clearTimeout(this.tm),this.tm=null)},destroy:function(){this.destroied||(this.destroied=!0,this._ctm(),this.handler=null,this.pv=null,this.cv=null,W(this,0,this.route,this.env,!1),this.env=null)}};var vc=Q.prototype,wc=Array.prototype;e(vc,"push",function(){if(0!==arguments.length){var a=[this.length,0].concat(wc.slice.call(arguments));vc.splice.apply(this,a)}}),e(vc,"unshift",function(){var a=[0,0].concat(wc.slice.call(arguments));vc.splice.apply(this,a)}),e(vc,"remove",function(a){var b=this[sc].arr.indexOf(a);b>=0&&vc.splice.call(this,b,1)}),e(vc,"splice",function(){function a(a,b,c){if(f(j,a)&&B(b)){var d=j[a];c?(D(b)&&(b=new Q(b)),E(b)&&L(b,d,!0)):E(b)&&L(b,d,!1);for(var e in d){var g=d[e];$(b,g.emitter)}}}var b=arguments[0],c=arguments[1],d=arguments.length-2,e=this[sc].arr,g=e.length;c>g-b&&(c=g-b);var h,i=d-c,j=this[xc];if(0!==i)for(h=b+c;g>h;h++)a(h,e[h],!1),a(h+i,e[h],!0),P(this,h);for(h=b;b+c>h;h++)a(h,e[h],!1),N(this,h,e[h],!1),P(this,h);for(h=0;d>h;h++)a(h+b,arguments[h+2],!0),N(this,h+b,arguments[h+2],!0);var k=wc.splice.apply(e,arguments);return K(this),O(this),new Q(k)}),["join","indexOf","fill","find"].forEach(function(a){e(vc,a,function(){return wc[a].apply(this[sc].arr,arguments)})}),e(vc,"slice",function(){return new Q(wc.slice.apply(this[sc].arr,arguments))}),g(vc,"length",function(){return this[sc].arr.length},function(){throw"todo"}),e(vc,"filter",function(a){var b=this[sc].arr,c=o(b,a);return new Q(c)}),e(vc,"sort",function(){var a=wc.sort.apply(this[sc].arr,arguments);return new Q(a)}),e(vc,"destroy",function(){this[sc].arr.length=0}),e(vc,"forEach",function(){wc.forEach.apply(this[sc].arr,arguments)}),R.prototype={_ctm:function(){null!==this.tm&&(clearTimeout(this.tm),this.tm=null)},notify:function(a,b,c){this._ctm(),this.tm=setTimeout(this.dg,0),this._notify(a,b,c)},destroy:function(){if(!this.destroied){this.destroied=!0,this.handler=null,this.data=null,this._ctm(),this.dg=null,this.pv=null,this.cv=null;for(var a in this.emitters)this.emitters[a].destroy(),this.emitters[a]=null;this.emitters=null}},_deal:function(){},_notify:function(){}},S.prototype={notify:function(a,b,c){this.cache[c]!==a&&this.callBase("notify",a,b,c)},_notify:function(a,b,c){this.cache[c]=a,this.vc=!0},_val:function(){var a="",b=this;return this.items.forEach(function(c){var d=c.is_var?b.cache[c.value]:c.value;a+=d?d:""}),a},_init:function(){this.cv=this.pv=this._val()},_deal:function(){this.vc&&(this.vc=!1,this.cv=this._val(),this.cv!==this.pv&&(this.handler(this.cv,this.pv,this.data),this.pv=this.cv))},destroy:function(){this.callBase("destroy"),this.items.length=0;for(var a in this.cache)this.cache[a]=null;this.cache=null}},b(S,R),T.prototype={_notify:function(a,b,c){this.changes.push(c)},_deal:function(){var a,b,c,d;for(a=0;a<this.changes.length;a++)if(b=this.changes[a],c=this.var_tree[b])for(d=0;d<c.length;d++)c[d].cached=!1,U(c[d]);this.changes.length=0,this.cv=this.expr.exec(this.env),(E(this.cv)||this.cv!==this.pv)&&(this.handler(this.cv,this.pv,this.data),this.pv=this.cv)},destroy:function(){this.callBase("destroy"),this.changes.length=0,this.env=null;for(var a in this.var_tree)this.var_tree[a]=null;this.var_tree=null,this.expr.destroy(),this.expr=null}},b(T,R);var xc="__$jing0210emit$__",yc=4294967280;e(uc,"$unwatch",function(a){var b=this[sc].listeners,c=b[a];c&&(eb(c),delete b[a])}),e(uc,"$watch",function(a,b,c,d){if("function"!=typeof b)throw new Error("$watch need function");if(B(a))return gb(this,a,b,d);if(!z(a))throw new Error("$watch wrong format");return Yc.test(a)?db(this,a,b,c,d):void Zc.test(a)});var zc={},Ac=new hb("jing",null),Bc=hb.prototype;e(Bc,"require",function(a){return ib(a,this)}),g(Bc,"path",function(){return this.parent?this.parent.path+"."+this.name:this.name}),g(Bc,"root",function(){return this.parent?this.parent.root:this}),e(Bc,"factory",function(a,b){var c;if(b){this.__.factories.hasOwnProperty(a)&&h(a,":factory has been exists. override!");var d="function"==typeof b;return c={state:d?0:1,inst:d?null:b,func:d?b:null},this.__.factories[a]=c,this}if(c=this.__.factories[a],!c)return h(a,": factory not found!"),null;if(0===c.state)c.state=999,c.inst=c.func(this),c.state=1;else if(999===c.state)throw'factory "'+a+'" of Module "'+this.name+'" is loading. 可能的原因是产生了循环依赖。';return c.inst}),e(Bc,"env",function(a,b){var c=this.__.controllers;return b?"function"==typeof b?(e(c,a,new lb(this,a,b)),this):(h("controller must be function"),this):c[a]}),e(Bc,"data",function(a,b){var c=this.__.datasources;if("function"!=typeof b){var d=c[a];if(!d)throw'Data Source "'+a+'" not found.';return 0===d.state&&(d.inst=new ic(a,d.func(this)),d.state=1),d.inst.value}c[a]={state:0,func:b,inst:null}});mb.prototype;e(Bc,"directive",function(a,b){if(!A(b))throw new Error("directive need function");return sb(a,b),this});var Cc={},Dc=!1;i(function(){Dc||(Dc=!0)}),e(Bc,"drive",function(a){if(this.parent)throw'function "drive" can only be applied to root Module';return z(a)&&(a=document.querySelector(a)),pb(a),Dc&&nb(),this}),e(Bc,"init",function(a){if(this.parent)throw'function "init" can only be applied to root Module';return"function"==typeof a&&this.__.runs.push(a),this}),e(Bc,"conf",function(a){for(var b in a)this.__.config[b]=a[b];return this});var Ec={},Fc={};i(function(){var a=v("*[j-app]");0!==a.length&&(n(a,function(a){var b=w(a,"j-app"),c=jb(b);pb(c,a)}),nb())}),sb("j-bind",function(){return function(a,b,c,d,e){yb(a,b,c,d,e,!1)}}),sb("j-class",function(){function a(a,b,c){a.className=(a.className.replace(b.trim(),"")+" "+c).trim()}return function(b,c,d,e,f){function g(b,c,d){a(d,c,b)}var h;if(Yc.test(f))h=d.$watch(f,g,!1,e);else{var i=Gb(f,!0);h=gb(d,i,g,e)}a(e,"",h.cv)}}),sb("j-if",function(){return function(){throw"j-if has not been implemented"}});var Gc=vb.prototype;Gc.run=function(a){l({url:a,method:"get",type:"text",success:d(this,this.success),error:d(this,this.error)})},Gc.success=function(a){var b,c=this.ele,d=c.parentNode,e=document.createElement("div"),f=document.createDocumentFragment(),g=e.childNodes,h=g.length;for(e.innerHTML=a,b=0;h>b;b++)mc(g[b],this.module,this.env),f.appendChild(g[b]);d.insertBefore(f,c),d.removeChild(c)},Gc.error=function(){this.ele.innerHTML='<p class="j-include-error">Error at j-include.</p>'},Gc.destroy=function(){this.ele=null,this.module=null,this.env=null};var Hc=xb.prototype;Hc.change=function(){this.val=this.ele[this.val_key],this.expr.set(this.env,this.val)},Hc.update=function(a){this.val!==a&&(this.ele[this.val_key]=a,this.val=a)},Hc.destroy=function(){this.ele=null,this.expr.destroy(),this.expr=null},sb("j-model",function(){return function(a,b,c,d,e){yb(a,b,c,d,e,!0)}}),sb("j-on",function(){return function(a,b,c,d,e){var f=hc(e);if(!f)throw"j-on format wrong.";var g=Gb(f.expr);gc(d,f.on,function(){g.exec(c)})}}),sb("j-enter",function(){return function(a,b,c,d,e){var f=Gb(e);gc(d,"keydown",function(a){13===a.keyCode&&f.exec(c)})}}),n(["j-click","j-dblclick","j-mousedown"],function(a){var b=a.substring(2);sb(a,function(){return function(a,c,d,e,f){var g=Gb(f);gc(e,b,function(){g.exec(d)})}})}),n(["j-blur","j-focus"],function(a){var b=a.substring(2);sb(a,function(){return function(a,c,d,e,f){var g=Gb(f);s(e,b,function(){g.exec(d)})}})}),sb("j-change",function(){return function(a,b,c,d,e){var f=Gb(e);s(d,"change",function(){setTimeout(function(){f.exec(c)},0)})}});var Ic=Ab.prototype;Ic.update=function(a){function b(a){var b=k.get(a);return b&&0!==b.length?b.pop():-1}function c(a){for(var b=a+1;b<g.length;b++)if(g[b])return b;return-1}function d(a,b){var c=g[a],d=g[b];r(c.ele,d.ele),g[a]=d,g[b]=c}if(!E(a))throw new Error("only support Array in j-repeat.");var e,f=a[sc].arr,g=this.items;if(0!==f.length||0!==g.length){var h;if(g.length>0&&f.length===g.length){for(h=!0,e=0;e<f.length;e++)if(f[e]!==g[e].val){h=!1;break}if(h)return}var i,j,k=this.index_map,l=new Map,m=new Int32Array(f.length);for(e=0;e<f.length;e++)i=b(f[e]),i>=0&&(m[e]=i+1,g[i].used=!0);for(e=0;e<g.length;e++)j=g[e],j.used||(u(j.ele),j.env.$destroy(),j.ele=null,j.env=null,delete g[e]);var n,o,p=c(-1),q=0>p?this.cmt:g[p].ele,s=new Array(f.length),v=null;for(e=0;e<f.length;e++)i=m[e]-1,0>i?(n=I(this.env,e),o=this.ele.cloneNode(!0),j=new zb(o,n,f[e]),Bb(n,e,f.length),n[this.key]=f[e],lc(o,this.attr,this.module,n),jc(),v=v?v:document.createDocumentFragment(),v.appendChild(o)):(v&&(t(v,q),v=null),i>p&&d(i,p),p=c(p),q=0>p?this.cmt:g[p].ele,j=g[i],Bb(j.env,e,f.length)),j.used=!1,s[e]=j,Cb(l,f[e],e);v&&(t(v,q),v=null),k.clear(),g.length=0,this.items=s,this.index_map=l}},Ic.render=function(a){if(!E(a))throw new Error("only support Array in j-repeat.");for(var b,c,d=a[sc].arr,e=document.createDocumentFragment(),f=0;f<d.length;f++)b=this.ele.cloneNode(!0),c=I(this.env,f),Bb(c,f,d.length),c[this.key]=d[f],lc(b,this.attr,this.module,c),e.appendChild(b),this.items.push(new zb(b,c,d[f])),Cb(this.index_map,d[f],f);Xc.push({ele:e,pos:this.cmt})},function(){function a(a,b){a.style.setProperty("display",b?"":"none","")}function b(b,c,d,e,f,g){function h(b,c,d){a(d,g?b?!0:!1:b?!1:!0)}var i;if(Yc.test(f))i=d.$watch(f,h,!1,e);else{var j=Gb(f,!0);i=gb(d,j,h,e)}var k=i.cv;a(e,g?k?!0:!1:k?!1:!0)}sb("j-show",function(){return function(a,c,d,e,f){b(a,c,d,e,f,!0)}}),sb("j-hide",function(){return function(a,c,d,e,f){b(a,c,d,e,f,!1)}})}(),sb("j-style",function(){function a(a){var b=a.replace(/[-_](\w)/g,function(a,b){return b.toUpperCase()});if(b in c.style)return a;for(var f,g=b.charAt(0).toUpperCase()+b.slice(1),h=e.length;h--;)if(f=e[h]+g,f in c.style)return d[h]+a;return!1}function b(b,c){var d,e,g,h;if(B(c))for(d in c){if(e=a(d),!e)return;g=c[d],h=f.test(g),h?(g=g.replace(f,""),b.style.setProperty(e,g,"important")):b.style.setProperty(e,g,"")}else b.style=D(c)?c.join(";"):c}var c=document.createElement("div"),d=["-webkit-","-moz-","-ms-"],e=["Webkit","Moz","ms"],f=/!important;?$/;return function(a,c,d,e,f){var g=nc(f);null===g&&(g=Gb(f,!0));var h=gb(d,g,function(a,c,d){b(d,a)},e);b(e,h.cv)}}),Eb.prototype={increment:function(a){return this.exec(a)},_exec:function(a){return this.nodes[0].exec(a)},exec:function(a){if(this.need_cached){var b;return this.cached?b=this.value:(b=this._exec(a),this.value=b,this.cached=!0),b}return this._exec(a)},set:function(){},destroy:function(){for(var a=this.nodes,b=0;b<a.length;b++)a[b].destroy(),a[b]=null;a.length=0,this.nodes=null}};var Jc=[],Kc=[],Lc=!1,Mc=null,Nc=!0,Oc={A:[400,0],".":[200,0],"[]":[200,0],F:[300,0],"#++":[90,0],"#--":[90,0],"!":[80,1],"~":[80,1],"+#":[80,1],"-#":[80,1],"++#":[80,1],"--#":[80,1],"*":[70,0],"/":[70,0],"%":[70,0],"#+":[60,0],"#-":[60,0],"<<":[50,0],">>":[50,0],">>>":[50,0],"<":[40,0],">":[40,0],"<=":[40,0],">=":[40,0],"==":[30,0],"===":[30,0],"!=":[30,0],"!==":[30,0],"&":[20,0],"^":[19,0],"|":[18,0],"&&":[17,0],"||":[16,0],"?":[15,1],":":[15,1],"=":[10,1],">>=":[10,1],"<<=":[10,1],">>>=":[10,1],"+=":[10,1],"-=":[10,1],"*=":[10,1],"/=":[10,1],"%=":[10,1],"&=":[10,1],"^=":[10,1],"|=":[10,1],"->":[-10,0],",":[-20,0],"(":[-1e3,0]};Fb(Sb,function(a){for(var b=[],c=0;c<this.nodes.length;c++)b.push(this.nodes[c].exec(a));return b},{concat:function(a,b){var c="array"===a.type?a.nodes:[a];b?[].unshift.apply(this.nodes,c):[].push.apply(this.nodes,c)}}),Fb(Tb,function(a){var b=this.nodes;switch(this.operator){case"#+":return b[0].exec(a)+b[1].exec(a);case"#-":return b[0].exec(a)-b[1].exec(a);case"+#":return 0+b[0].exec(a);case"-#":return 0-b[0].exec(a);case"*":return b[0].exec(a)*b[1].exec(a);case"/":return b[0].exec(a)/b[1].exec(a);
case"#++":return b[0].increment(a,!0,!1);case"#--":return b[0].increment(a,!1,!1);case"++#":return b[0].increment(a,!0,!1);case"--#":return b[0].increment(a,!1,!0);case"!":return!b[0].exec(a);case">":return b[0].exec(a)>b[1].exec(a);case"<":return b[0].exec(a)<b[1].exec(a);case">>":return b[0].exec(a)>>b[1].exec(a);case">>>":return b[0].exec(a)>>>b[1].exec(a);case"<<":return b[0].exec(a)<<b[1].exec(a);case"==":return b[0].exec(a)==b[1].exec(a);case"===":return b[0].exec(a)===b[1].exec(a)}}),Fb(Ub,function(a){var b=this.nodes;return b[0].exec(a)?b[1].exec(a):b[2].exec(a)}),Fb(Vb,function(){return this.value},{exec:function(){return this.value},increment:function(a,b){return this.value+(b?1:0)}}),Fb(Wb,function(){return null}),Fb(Xb,function(a){var b,c,d=this.nodes[1].exec(a);if("empty"===this.nodes[0].type?(b=d,c=a):(c=this.nodes[0].exec(a),b=c[d]),A(b)){var e=this.nodes[2].exec(a);return b.apply(c,e)}},{toString:function(){return"func"}}),Fb(Yb,function(){}),Fb(Zb,function(a){var b=this.nodes[0].exec(a),c=this.nodes[1].exec(a);return B(b)?b[c]:void 0},{increment:function(a,b,c){var d=this.nodes[0].exec(a),e=this.nodes[1].exec(a);if(null!==d&&f(d,e)){var g=d[e],h=g+(b?1:-1);return d[e]=h,c?h:g}return null},set:function(a,b){var c=this.nodes[0].exec(a),d=this.nodes[1].exec(a);c[d]=b}}),Fb($b,function(a){var b=this.nodes[1].exec(a),c=this.nodes[0].exec(a),d=b;switch(this.op){case"=":break;case">>=":d=c>>b;break;case"<<=":d=c<<b;break;case">>>=":d=c>>>b;break;case"+=":d=c+b;break;case"-=":d=c-b;break;case"*=":d=c*b;break;case"%=":d=c%b;break;case"/=":d=c/b;break;case"&=":d=c&b;break;case"^=":d=c^b;break;case"|=":d=c|b}return this.nodes[0].set(a,d),d}),Fb(_b,function(a){return a.$get(this.var_name)},{increment:function(a,b,c){var d=this.exec(a),e=d+(b?1:-1);return a.$set(this.var_name,e),c?e:d},set:function(a,b){a.$set(this.var_name,b)}});var Pc="",Qc="",Rc=!1,Sc="",Tc=new RegExp("(?:\\+(?:\\+?)(?:=?))|(?:\\-(?:\\-?)(?:=?))|(?:\\*(?:=?))|(?:\\/(?:=?))|(?:%(?:=?))|(?:\\!(?:={0,2}))|(?:~(?:=?))|(?:&(?:&|=)?)|(?:\\|(?:\\||=)?)|(?:\\^(?:=?))|(?:>(?:>{0,2})(?:=?))|(?:<(?:<?)(?:=?))|(?:=(?:={0,2}))|\\(|\\)|\\[|\\]|\\{|\\}|\\.|\\?|\\:|;|,|(?:\"[^\"]*\")|(?:'[^']*')|(?:\\d+(?:\\.\\d+)?)|(?:[a-zA-Z$_][a-zA-Z0-9$_]*)","g"),Uc={on:{},be:{},af:{}},Vc=0,Wc=ic.prototype;e(Wc,"get",function(){return this.__.value}),e(Wc,"ping",function(){}),e(Wc,"update",function(){}),e(Wc,"on",function(a,b){if("function"!=typeof b)throw"DataSource on need function";"change"===a&&this.listeners.change.push(b)}),e(Wc,"bind",function(){});var Xc=[];jing={},jing.module=jb,jing.require=ib,jing.config=a,jing.directive=function(a){var b=kb(a,!1);return b?b[0].directive(b[1]):(h(a,": directive not found. no module."),null)},jing.factory=function(a){var b=kb(a,!1);return b?b[0].factory(b[1]):(h(a,": factory not found. no module."),null)},jing.ready=i,jing.env=ob,jing.each=n,jing.map=m,jing.filter=o,jing.defineProperty=e,jing.defineGetterSetter=g,jing.JArray=Q,function(){var a=document.createElement("style");document.head.appendChild(a);var b=a.sheet;b.insertRule("[j-cloak] { display : none !important;}",0)}();var Yc=/^\s*[\w\d\$\_]+\s*(?:(?:\.[\w\d\$\_]+\s*)|(?:\[\s*\d+\s*\]\s*))*\s*$/,Zc=/\{\{(.+?)\}\}/g}();
//# sourceMappingURL=jing.min.js.map