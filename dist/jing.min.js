/*** jing.js(https://github.com/YuhangGe/jing.js) ***/
!function(){function a(a,b){if("undefined"==typeof a||"undefined"==typeof b)throw console.trace(),"inherit error!";for(var c in b.prototype){var d=a.prototype[c];"undefined"==typeof d&&(a.prototype[c]=b.prototype[c])}if(a.__base_objects__=[],a.__base_objects__.push(b),"undefined"!=typeof b.__base_objects__)for(var e=0;e<b.__base_objects__.length;e++)a.__base_objects__.push(b.__base_objects__[e]);a.prototype.base=function(b){var c=null,d=void 0;return"undefined"==typeof this.__inherit_base_deep__?this.__inherit_base_deep__=0:this.__inherit_base_deep__++,c=a.__base_objects__[this.__inherit_base_deep__],d="undefined"==typeof b||null==b?c.call(this):b instanceof Array==!0?c.apply(this,b):c.apply(this,[].slice.call(arguments)),this.__inherit_base_deep__--,d},a.prototype.callBase=function(b,c){var d=null,e=void 0;"undefined"==typeof this.__inherit_deep__?this.__inherit_deep__=0:this.__inherit_deep__++,d=a.__base_objects__[this.__inherit_deep__];var f=d.prototype[b];if("function"!=typeof f)throw"There is no method:"+b+" in baseClass";return e="undefined"==typeof c||null===c?f.call(this):c instanceof Array==!0?f.apply(this,c):f.apply(this,[].slice.call(arguments,1)),this.__inherit_deep__--,e}}function b(a,b){for(var c in b)a[c]=b[c]}function c(a,b){return function(){b.apply(a,arguments)}}function d(a,b,c){if("object"==typeof b)for(var d in b)a.style[d]=b[d];else a.style[b]=c}function e(a,b,c){return"undefined"==typeof c?a.getAttribute(b):void a.setAttribute(b,c)}function f(a,b,c,d,e){Object.defineProperty(a,b,{value:c,writable:d?!0:!1,enumerable:e?!0:!1})}function g(a,b){return a.hasOwnProperty(b)}function h(a,b,c,d,e,f){var g={configurable:e?!0:!1,enumerable:f?!0:!1};c&&(g.get=c),d&&(g.set=d),Object.defineProperty(a,b,g)}function i(a,b,c){a.addEventListener(b,c)}function j(){console.log.apply(console,arguments)}function k(a){return a instanceof Array}function l(a,b){if(!b)return a;for(var c in b)a[c]=b[c];return a}function m(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}function n(a){return"string"==typeof a}function o(a){return"number"==typeof a}function p(a){return"object"==typeof a}function q(a){if(!a)throw console.trace(),"$assert failure!"}function r(a){l(a,{method:"get",type:"json",data:{}}),new XMLHttpRequest}function s(a,b){this.__={et:new u(this),name:a,children:{},parent:b?b:null}}function t(a,b){this.id=a,this.I_emitter=null,this.L_emitter=null,this.children={},this.parent=b,this.path=b.path+"."+a}function u(a){this.children={},this.env=a,this.path=""}function v(a){this.node=a,this.pre_value=a.val(),this.cur_value=this.pre_value,this.listeners=[]}function w(a){this.base(a),this.handler=c(this,this.deal),this.tm=null}function x(a,b){this.handler=a,this.data=b}function y(a,b,d){this.handler=a,this.data=b,this.lazy=o(d)&&(d=Math.floor(d))>=0?d:0,this.timeout=null,this.delegate=c(this,this.deal),this.changes=[]}function z(a,b,c,d){a[Nb][b]=c,a[Ob][b]=d,h(a,b,function(){return this[Nb][b]},function(a){var c=this[Nb];if(p(c[b])&&p(a)){var d=this[Ob][b];A(d,a),c[b]=a}else c[b]=a;this[Ob][b].notify()})}function A(a,b){var c,d,e=a.children;for(c in e)g(b,c)&&(d=b[c],delete b[c],z(b,c,d,e[c]),A(e[c],d))}function B(a,b,c,d){a[Nb][b]=new JArray(c),a[Ob][b]=d,h(a,b,function(){return this[Nb][b]},function(){j("不允许覆盖array")})}function C(a,b,c){var d,e;if(g(a,Nb)?d=a[Nb]:(d={},f(a,Nb,d)),g(a,Ob)||f(a,Ob,{}),!g(d,b)){if(!g(a,b))throw"property "+b+" not found.";e=a[b],delete a[b],k(e)?B(a,b,new JArray(e)):z(a,b,e,c)}return d[b]}function D(a,b,c,d){var e=b.replace(/\[\s*(\d+)\s*\]/g,".$1.").replace(/\.{2}/g,".").split("."),f=E(a,e),g=d?f.L_emitter:f.I_emitter;null===g&&(d?(g=new w(f),f.L_emitter=g):(g=new v(f),f.I_emitter=g)),g.listeners.push(c),F(a,e)}function E(a,b){function c(a,b){var c=a.children[b];return c||(c=a.children[b]=new t(b,a)),c}var d,e=a.__.et,f=c(e,b[0]);for(d=1;b>d;d++)f=c(f,b[d]);return f}function F(a,b){var c,d,e,f,g=a,h=a.__.et;for(d=0;b>d;d++){if(c=b[d],e=h.children[c],f=C(g,c,e),!p(f))throw"$watch need object.";g=f,h=e}}function G(a){for(var b,c=new sb(a[0]),d=1;d<a.length;d++)b=new mb(a[d]),c=new qb(c,b);return c}function H(a,b,c,d,e){function f(a,b){var c=a.nodes[1];"constant"===c.type&&b.push(c.value),a.parent&&"property"===a.parent.type&&f(a.parent,b)}function g(a,b){if("variable"===a.type){var c=[a.var_name];"property"===a.parent.type&&f(a.parent,c),b.push(c)}else for(var d=0;d<a.nodes.length;d++)g(a.nodes[d])}var h=[];if(g(b,h),0!==h.length)for(var i=e===!1?new x(c,d):new y(c,d,o(e)?e:0),j=0;j<h.length;j++){var k=G(h[j]),l=new Notifier(k,a);l.listeners.push(i),F(a,h[j],l)}}function I(a,b){var c={};f(this,"__",c),f(c,"factories",{}),f(c,"directives",{}),f(c,"runs",[]),f(c,"controllers",{}),f(c,"datasources",{}),f(c,"config",{}),f(this,"parent",b?b:null),f(this,"children",{}),f(this,"name",a)}function J(a,b){for(var c,d=a.split("."),e=Pb,f=0;f<d.length-1;f++){if(c=e[d[f]],!c)throw"require error: module "+a+" not found.";e=c.children}var g=c?c:b,h=d[d.length-1],i=g.factory(h);if(!i)throw"require error: factory "+a+" not found.";return i}function K(a){for(var b,c=a.split("."),d=Pb,e=null,h=0;h<c.length-1;h++)b=d[c[h]],b||(b=new I(c[h],e),f(d,c[h],b,!1,!0)),d=b.children,e=b;var i=c[c.length-1];return g(d,i)?d[i]:(b=new I(i,e),f(d,i,b),b)}function L(a,b){var c=a.trim().split(".");if(!b&&c.length<=1)return null;for(var d,e=b?c.length:c.length-1,f=0;e>f;f++)if(d=0===f?Pb[c[f]]:d.children[c[f]],!d)return null;return b?d:[d,c[c.length-1]]}function M(a,b,c){this.name=b,this.module=a,this.func=c}function N(a,b,c){this.name=b,this.module=a,this.state=0,this.func=c,this.link_func=null}function O(a,b){var c,d=zb(a);c=g(Vb,d)?Vb[d]:Vb[d]=[],c.push(b)}function P(a){if(0===a.state){a.state=999;var b=a.func(a.module);a.state=1,a.link_func=b}}function Q(a){Tb[a.name]=a,Ub[a.module.path+"."+a.name]=a}function R(a,b,c){Q(new N(Qb,a,b,c))}function S(){}function T(a,b,c,d){var e,f=b.removeNamedItem("j-env"),g=f.value.trim();if(g.indexOf(".")>=0){var h=L(g,!1);if(!h)throw'j-env: environment "'+g+'" not found. module not found.';e=h[0].env(h[1])}else e=c.env(g);if(!e)throw'j-env: environment "'+g+'" not found.';e.func.call(d,c)}function U(a,b,c){this.ele=a,this.module=b,this.env=c}function V(a,b,c,d){var e=b.removeNamedItem("j-include"),f=e.value,g=_(f),h=g.exec(d);if(!n(h))throw"j-include need string.";var i=new U(a,c,d);O(a,i),i.run(h)}function W(a,b,c){this.ele=a,this.env=b,this.expr=c,this.val=null}function X(a,b,c,d,e){this.ele=a,this.env=d,this.expr=e,this.attr=b,this.module=c,this.r_envs=[],this.r_eles=[],this.frag=null}function Y(a,b,c,d){var e=b.removeNamedItem("j-repeat"),f=e.value,g=_(f);if("in"!==g.type)throw"j-repeat format wrong!";new X(a,b,c,d,g).run()}function Z(a,b){this.type=a,this.nodes=b?b:[],this.parent=null;for(var c=0;c<this.nodes.length;c++)this.nodes[c].parent=this;this.value=null,this.cached=!1,this.need_cached=!0}function $(c,d,e){c.prototype._exec=d,e&&b(c.prototype,e),a(c,Z)}function _(a,b){_b="emp",ac=null,bc=b?!0:!1,ub(a),db(),eb();var c;return 0===Zb.length?c=new nb:1===Zb.length?c=Zb[0]:(c=new Z("root",m(Zb)),c.need_cached=bc),Zb.length=0,null!==ac&&("emp"===c.type||"root"===c.type?ab():c=new pb(ac,c)),c}function ab(){throw Zb=[],$b=[],"parse error"}function bb(a){switch(a){case";":eb();break;case"(":"var"===_b&&($b.push("F"),Zb.push(new jb([]))),$b.push(a);break;case")":case"]":eb(")"===a?"(":"[");break;case"+":case"-":case"++":case"--":cb("op"===_b?a+"#":"#"+a);break;default:cb(a)}}function cb(a){for(var b,c,d=cc[a];$b.length>0&&(b=$b[$b.length-1],c=cc[b],d[0]<c[0]||d[0]===c[0]&&0===d[1]);)$b.pop(),fb(b);$b.push(a)}function db(){for(;!pc;)switch(vb(),"op"!==gc||"'"!==hc&&'"'!==hc||(hc=yb(gc),gc="str"),gc){case"var":switch(hc){case"true":case"false":ib(new mb("true"===hc)),_b="num";break;case"in":if(0!==$b.length||1!==Zb.length||"var"!==Zb[0].type||null!==ac)throw"grammar wrong: in";ac=Zb.pop().var_name;break;default:ib(new sb(hc)),_b="var"}break;case"num":ib(new mb(Number(hc))),_b="num";break;case"str":ib(new mb(hc)),_b="str";break;case"op":bb(hc),_b="op"}}function eb(a){for(var b=null;$b.length>0&&(b=$b.pop(),!a||b!==a);)fb(b);var c,d;if("("===a&&"("===b&&"F"===gb()&&(c=Zb[Zb.length-1],c&&"argument"!==c.type||c.nodes.length>0)){if(d=Zb[Zb.length-2],!d||"argument"===d.type||d.nodes.length)throw"something strange wrong";d.merge(c),hb()}}function fb(a){var b,c,d;switch(a){case"F":c=hb(),b=hb(),ib(new ob(b,c));break;case",":c=hb(),b=hb(),d="argument"===b.type?b:new jb(b),d.merge(c),ib(d);break;case".":c=hb(),b=hb(),d="variable"===c.type?new mb(c.var_name):c,ib(new qb(b,d));break;case"[]":c=hb(),b=hb(),ib(new qb(b,c));break;case"?":case":":c=hb(),b=hb(),ib(new lb(a,b,c));break;case"++#":case"--#":case"#++":case"#--":case"+#":case"-#":case"!":case"~":b=hb(),d=new kb(a,b,c),"number"===b.type&&(d=new mb(d.exec())),ib(d);break;case"=":case"+=":case"-=":case"*=":case"/=":case"%=":case">>=":case">>>=":case"<<=":case"&=":case"^=":case"|=":c=hb(),b=hb(),d=new rb(a,b,c),ib(d);break;case"#+":case"#-":case"*":case"/":case"%":case"<<":case">>":case">>>":case"==":case"===":case">":case"<":case"&":case"&&":case"|":case"||":case"!=":case"!==":case"^":c=hb(),b=hb(),d=new kb(a,b,c),"constant"===b.type&&"constant"===c.type&&(d=new mb(d.exec())),ib(d)}}function gb(){return $b.length>0?$b[$b.length-1]:null}function hb(){return 0===Zb.length&&ab(),Zb.pop()}function ib(a){a.need_cached=bc,Zb.push(a)}function jb(a){this.base("argument",a instanceof Array?a:[a])}function kb(a,b,c){this.base("calc",[b,c]),this.operator=a}function lb(a,b,c){var d=[b];"?"===a&&"condition"===c.type?[].push.apply(d,c.nodes):d.push(c),this.base("condition",d)}function mb(a){this.base("constant",[]),this.value=a}function nb(){this.base("emp")}function ob(a,b){var c=[a];k(b)||(b=[b]),[].push.apply(c,b),this.base("function",c,{readable:!1})}function pb(a,b){this.base("in",[a,b])}function qb(a,b){this.base("property",[a,b])}function rb(a,b,c){this.op=a,this.base("set",[b,c])}function sb(a){this.base("variable",[]),this.var_name=a}function tb(a,b){for(var c=0;c<a.length;c++)for(var d=a[c],e=b[c],f=d.charCodeAt(0),g=d.length,h=0,i=1;g>i;i++)if(0===f)e[i-1]=d.charCodeAt(i)-1;else{for(var j=d.charCodeAt(i)-1,k=d.charCodeAt(i+1)-1,l=0;j>l;l++)e[h]=k,h++;i++}}function ub(a){kc=a,mc=a.length,lc=0,nc=-1,pc=!1}function vb(){if(!pc){for(var a=0,b=oc,c=dc,d=lc,e=dc,f=0;;){if(wb()<0){e>=0?(c=e,a=f,lc=d+f):mc>d&&(c=fc,lc=d+1),d>=mc&&(pc=!0);break}a++;var g=jc.e[nc];if(void 0===g){e>=0?(c=e,a=f,lc=d+f):c=ec;break}for(var h,i=-1,j=b;j>=0;){if(h=jc.b[j]+g,jc.c[h]===j){i=jc.n[h];break}j=jc.d[j]}if(0>i){e>=0?(c=e,a=f,lc=d+f):(c=fc,lc=d+1);break}b=i,c=jc.a[i],c>=0&&(e=c,f=a)}hc=kc.substr(d,a),xb(c)}}function wb(){return nc=lc>=mc?-1:kc[lc++].charCodeAt(0)}function xb(a){switch(a){case dc:case ec:case fc:gc="emp";break;case 1:gc="op";break;case 4:gc="emp";break;case 2:gc="var";break;case 3:gc="num";break;case 0:gc="op";break;case 5:gc="emp"}}function yb(a){for(var b,c=lc,d=c;(b=kc[d++])&&b!==a;);var e=b===a;return lc=e?d+1:d,pc=e?pc:!0,kc.substring(c,e?d-1:d)}function zb(a){return a.id||(a.id="j.ele."+(rc++).toString(36)),a.id}function Ab(a){a.__is_p_stoped=!1,a.stopPropagation=function(){this.__is_p_stoped=!0}}function Bb(a){return a.__is_p_stoped===!0}function Cb(a){var b,c,d,f,h=a.type,i=a.target||a.srcElement||a.originalTarget,j=qc.on;if(g(j,h))for(b=j[h],Ab(a);!Bb(a)&&i;){if(d=e(i,"id"),d&&g(b,d))for(c=b[d],f=0;f<c.length;f++)c[f].call(i,a);i=i.parentElement}}function Db(a,b,c){var d,e=zb(a),f=qc.on;g(f,b)?d=f[b]:(d=f[b]={},i(document.body,b,Cb));var h;h=g(d,e)?d[e]:d[e]=[],h.push(c)}function Eb(a){var b=/^\s*(\w+)\s*:(.+)$/.match(a);return null===b?null:{on:b[1],expr:b[2]}}function Fb(a,c){f(this,"name",a),f(this,"options",{direct:"s2c",type:"array"}),b(this.options,c);var d={};f(this,"__",d),d.listeners={change:[]};var e=this.options.type;d.value="object"===e?{}:"array"===e?[]:""}function Gb(a,b,c,d,e){P(c);var f=c.link_func;f(b,c.module,d,a,e,c.name)}function Hb(a,b,c,d){q(b);var e,f,g,h=d;if(f=b.getNamedItem("j-async-env"),null!==f)return void S(a,b,c,h);if(f=b.getNamedItem("j-env"),null!==f&&(h=d.$child(),T(a,b,c,h)),f=b.getNamedItem("j-include"),null!==f)return void V(a,b,c,h);if(f=b.getNamedItem("j-repeat"),null!==f)return void Y(a,b,c,h);for(f=b.getNamedItem("j-directive-name"),e=0;e<b.length;e++)f=b[e],g=Tb[f.name],g&&Gb(a,c,g.module,h,f.value)}function Ib(a,b,c){switch(a.nodeType){case 1:for(var d=Hb(a,a.attributes,b,c),e=a.childNodes,f=0;f<e.length;f++)Ib(e[f],b,d?d:c);break;case 3:Kb(a,c)}}function Jb(a){for(var b,c=0,d=[];null!==(b=tc.exec(a));)b.index>c&&d.push(new mb(a.substring(c,b.index))),c=b.index+b[0].length,d.push(_(b[0]));if(b&&c<a.length&&d.push(new mb(a.substring(c))),0===d.length)return null;if(1===d.length)return d[0];var e,f=d[0];"constant"===f.type&&n(f.value)||(d.unshift(new mb("")),f=d[0]);for(var g=1;g<d.length;g++)e=d[g],f="constant"===f.type&&"constant"===e.type?new mb(f.value+e.value):new kb("#+",f,e);return f}function Kb(a,b){var c=a.textContent,d=Jb(c);if(null!==d){if("constant"===d.type)return void(a.textContent=d.value);a.textContent=d.exec(b),H(b,d,Lb,{ele:a,exp:d,env:b},10)}}function Lb(a,b){b.ele.textContent=b.exp.exec(b.env)}var Mb=s.prototype;h(Mb,"$name",function(){return this.__.name}),h(Mb,"$children",function(){return this.__.children}),h(Mb,"$parent",function(){return this.__.parent}),h(Mb,"$root",function(){return this.__.parent?this.__.parent.$root:this}),f(Mb,"$child",function(a){a||(a=this.__.parent?this.__.parent.name+"."+__scope_counter++:"jing.scope."+__scope_counter++);var b=this.__.children;if(g(b,a))return b[a];var c=new Scope(a,this);return f(b,a,c,!1,!0),c}),f(Mb,"$val",function(a){return g(this,a)?this[a]:this.__.parent?this.__.parent.$val(a):null}),f(Mb,"$has",function(a){return g(this,a)?!0:this.__.parent?this.__.parent.$has(a):!1}),f(Mb,"$find",function(a){return g(this,a)?this:this.__.parent?this.__.parent.$find(a):void 0}),f(Mb,"$set",function(a,b){g(this,a)?this[a]=b:this.__.parent&&this.__.parent.set(a,b)}),f(Mb,"$prop",function(a,b){if(p(a))for(var c in a)this[c]=a[c];else this[a]=b}),t.prototype={val:function(a){var b=this.parent.val(this.id);return b&&a?b[a]:b},notify:function(){null!==this.I_emitter&&this.I_emitter.notify(),null!==this.L_emitter&&this.L_emitter.notify();for(var a in this.children)this.children[a].notify()}},u.prototype={val:function(a){return this.env.$get(a)}},v.prototype={notify:function(){if(this.cur_value=this.node.val(),this.cur_value!==this.pre_value){for(var a=0;a<this.listeners.length;a++)this.listeners[a].notify(this.cur_value,this.pre_value);this.cur_value=this.pre_value}}},w.prototype={notify:function(){null!==this.tm&&(clearTimeout(this.tm),this.tm=null),this.tm=setTimeout(this.handler,0)},deal:function(){this.tm=null,this.callBase("notify")}},a(w,Emitter),x.prototype={notify:function(a,b,c){this.handler([{var_name:a,pre_value:b,cur_value:c}],this.data)}},y.prototype={notify:function(a,b,c){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.changes.push({var_name:a,pre_value:b,cur_value:c}),this.timeout=setTimeout(this.delegate,this.lazy)},deal:function(){this.handler(this.changes,this.data),this.changes.length=0}};var Nb="__$jing.0210.prop$__",Ob="__$jing.0210.emit$__";f(Mb,"$watch",function(a,b,c,d){if("function"!=typeof b)return void j("$watch need function");var e,f;if(f=d===!1?new x:new y(a,b,c,o(d)?d:0),n(a))D(this,a.trim(),f,d===!1);else if(k(a))for(e=0;e<a.length;e++)D(this,a[e].trim(),f,d===!1);else j("$watch wrong format")});var Pb={},Qb=new I("jing",null),Rb=0,Sb=I.prototype;f(Sb,"require",function(a){return J(a,this)}),h(Sb,"path",function(){return this.parent?this.parent.path+"."+this.name:this.name}),h(Sb,"root",function(){return this.parent?this.parent.root:this}),f(Sb,"drive",function(a){if(this.parent)throw'function "drive" can only be applied to root Module';var b=new Scope("jing.scope."+this.path+__scope_counter++);return __root_scope_table[this.path]=b,setTimeout(c(this,function(){for(var c=0;c<this.__.runs.length;c++)this.__.runs[c](this,__root_scope_table[this.path]);Ib(a,this,b)}),0),this}),f(Sb,"factory",function(a,b){var c;if(b){this.__.factories.hasOwnProperty(a)&&j(a,":factory has been exists. override!");var d="function"==typeof b;return c={state:d?0:1,inst:d?null:b,func:d?b:null},this.__.factories[a]=c,this}if(c=this.__.factories[a],!c)return j(a,": factory not found!"),null;if(0===c.state)c.state=999,c.inst=c.func(this),c.state=1;else if(999===c.state)throw'factory "'+a+'" of Module "'+this.name+'" is loading. 可能的原因是产生了循环依赖。';return c.inst}),f(Sb,"directive",function(a,b,c){var d;return c?"function"!=typeof c?void j("directive need function"):(this.__.directives.hasOwnProperty(a)&&j("directive exists! override."),d=new N(this,a,b,c),this.__.directives[a]=d,Q(d),this):(d=this.__.directives[a],d?(P(d,this),d.inst):null)}),f(Sb,"init",function(a){if(this.parent)throw'function "init" can only be applied to root Module';return"function"==typeof a&&this.__.runs.push(a),this}),f(Sb,"conf",function(a){for(var b in a)this.__.config[b]=a[b];return this}),f(Sb,"env",function(a,b){var c=this.__.controllers;return b?"function"==typeof b?(f(c,a,new M(this,a,b)),this):(j("controller must be function"),this):c[a]}),f(Sb,"data",function(a,b){var c=this.__.datasources;if("function"!=typeof b){var d=c[a];if(!d)throw'Data Source "'+a+'" not found.';return 0===d.state&&(d.inst=new Fb(a,d.func(this)),d.state=1),d.inst.value}c[a]={state:0,func:b,inst:null}});var Tb=(N.prototype,{}),Ub={},Vb={},Wb=U.prototype;Wb.run=function(a){r({url:a,method:"get",type:"text",success:c(this,this.success),error:c(this,this.error)})},Wb.success=function(a){var b,c=this.ele,d=c.parentNode,e=document.createElement("div"),f=document.createDocumentFragment(),g=e.childNodes,h=g.length;for(e.innerHTML=a,b=0;h>b;b++)Ib(g[b],this.module,this.env),f.appendChild(g[b]);d.insertBefore(f,c),d.removeChild(c)},Wb.error=function(){this.ele.innerHTML='<p class="j-include-error">Error at j-include.</p>'},Wb.destroy=function(){this.ele=null,this.module=null,this.env=null};var Xb=W.prototype;Xb.run=function(){this.render(),this.env.$watch(this.expr,function(a){a.render()},this)},Xb.render=function(){var a=this.expr.exec(this.env);this.val!==a&&(this.ele.value=a,this.val=a)},Xb.destroy=function(){this.ele=null,this.expr.destroy(),this.expr=null},R("j-model",function(){return function(a,b,c,d,e){if("INPUT"===d.nodeName){var f=_(e),g=new W(d,c,f);O(ele,g),g.run()}}}),R("j-on",function(){return function(a,b,c,d,e){var f=Eb(e);if(!f)throw"j-on format wrong.";var g=_(f.expr);d.__JING_ENV__=c,Db(d,f.on,function(){g.exec(this.__JING_ENV__)})}});var Yb=X.prototype;Yb.run=function(){d(this.ele,"display","none"),this.render(),this.env.$watch(this.expr,function(){},this)},Yb.render=function(){var a,b,c,d=this.expr[1].exec(this.env),e=document.createDocumentFragment();if(!(d instanceof Array)){if("object"==typeof d)throw"TODO: j-repeat for object.";return void j("value of j-repeat is not Array or key-value Object.")}for(var f=0;f<d.length;f++)a=this.ele.cloneNode(!0),b=this.env.$child(),c={"@index":f,"@item":d[f],"@first":0===f,"@last":f===d.length-1,"@middle":0!==f&&f!==d.length-1,"@key":f},c[this.expr[0].value]=d[f],b.$props=c,Hb(a,this.attr,this.module,b),e.appendChild(a);null!==this.frag&&(this.ele.parentNode.removeChild(this.frag),this.frag=null),this.ele.parentNode.insertBefore(e,this.ele),this.frag=e},R("j-style",function(){return function(a,b,c,d,e){var f=drive_get_expr_pieces(e);0===f.length}}),Z.prototype={increment:function(a){return this.exec(a)},_exec:function(a){return this.nodes[0].exec(a)},exec:function(a){if(this.need_cached){var b;return this.cached?b=this.value:(b=this._exec(a),this.value=b,this.cached=!0),b}return this._exec(a)},set:function(){},destroy:function(){for(var a=this.nodes,b=0;b<a.length;b++)a[b].destroy(),a[b]=null;a.length=0,this.nodes=null}};var Zb=[],$b=[],_b="emp",ac=null,bc=!0,cc={"(":[9e3,0],"[":[300,0],".":[300,0],F:[200,0],"#++":[90,0],"#--":[90,0],"!":[80,1],"~":[80,1],"+#":[80,1],"-#":[80,1],"++#":[80,1],"--#":[80,1],"*":[70,0],"/":[70,0],"%":[70,0],"#+":[60,0],"#-":[60,0],"<<":[50,0],">>":[50,0],">>>":[50,0],"<":[40,0],">":[40,0],"<=":[40,0],">=":[40,0],"==":[30,0],"===":[30,0],"!=":[30,0],"!==":[30,0],"&":[20,0],"^":[19,0],"|":[18,0],"&&":[17,0],"||":[16,0],"?":[15,1],":":[15,1],"=":[10,1],">>=":[10,1],"<<=":[10,1],">>>=":[10,1],"+=":[10,1],"-=":[10,1],"*=":[10,1],"/=":[10,1],"%=":[10,1],"&=":[10,1],"^=":[10,1],"|=":[10,1],"->":[-10,0],",":[-20,0]};$(jb,function(a){for(var b=0;b<this.nodes.length;b++)this.nodes[b].exec(a)},{merge:function(a,b){var c="argument"===a.type?a.nodes:[a];b?[].unshift.apply(this.nodes,c):[].push.apply(this.nodes,c)}}),$(kb,function(a){var b=this.nodes;switch(this.operator){case"#+":return b[0].exec(a)+b[1].exec(a);case"#-":return b[0].exec(a)-b[1].exec(a);case"+#":return 0+b[0].exec(a);case"-#":return 0-b[0].exec(a);case"*":return b[0].exec(a)*b[1].exec(a);case"/":return b[0].exec(a)/b[1].exec(a);case"#++":return b[0].increment(a,!0,!1);case"#--":return b[0].increment(a,!1,!1);case"++#":return b[0].increment(a,!0,!1);case"--#":return b[0].increment(a,!1,!0);case"!":return!b[0].exec(a);case">":return b[0].exec(a)>b[1].exec(a);case"<":return b[0].exec(a)<b[1].exec(a);case">>":return b[0].exec(a)>>b[1].exec(a);case">>>":return b[0].exec(a)>>>b[1].exec(a);case"<<":return b[0].exec(a)<<b[1].exec(a);case"==":return b[0].exec(a)==b[1].exec(a);case"===":return b[0].exec(a)===b[1].exec(a)}}),$(lb,function(){var a=this.nodes;return a[0]?a[1]:a[2]}),$(mb,function(){return this.value},{exec:function(){return this.value},increment:function(a,b){return this.value+(b?1:0)}}),$(nb,function(){return null}),$(ob,function(){},{toString:function(){return"func"}}),$(pb,function(){}),$(qb,function(a){var b=this.nodes[0].exec(a),c=this.nodes[1].exec(a);return null===b?null:g(b,c)?b[c]:null},{increment:function(a,b,c){var d=this.nodes[0].exec(a),e=this.nodes[1].exec(a);if(null!==d&&g(d,e)){var f=d[e],h=f+(b?1:-1);return d[e]=h,c?h:f}return null},set:function(a,b){var c=this.nodes[0].exec(a),d=this.nodes[1].exec(a);c[d]=b}}),$(rb,function(a){var b=this.nodes[1].exec(a),c=this.nodes[0].exec(a),d=b;switch(this.op){case"=":break;case">>=":d=c>>b;break;case"<<=":d=c<<b;break;case">>>=":d=c>>>b;break;case"+=":d=c+b;break;case"-=":d=c-b;break;case"*=":d=c*b;break;case"%=":d=c%b;break;case"/=":d=c/b;break;case"&=":d=c&b;break;case"^=":d=c^b;break;case"|=":d=c|b}return this.nodes[0].set(a,d),d}),$(sb,function(a){return a.$get(this.var_name)},{increment:function(a,b,c){var d=this.exec(a),e=d+(b?1:-1);return a.$set(this.var_name,e),c?e:d},set:function(a,b){a.$set(this.var_name,b)}});var dc=-1,ec=-2,fc=-3,gc="",hc="",ic=Int32Array,jc={b:new ic(18),d:new ic(18),c:new ic(29),n:new ic(29),a:new ic(18),e:new ic(256)};tb(["\x00","\r\x00","\x00\r\b	\n\f\x00","\x00\x00\x00\f\f\r\b\b	\n\f\x00","\x00\x00","\n\r	\f\b\r\r\r\n"],[jc.b,jc.d,jc.c,jc.n,jc.a,jc.e]);var kc=null,lc=0,mc=0,nc=-1,oc=15,pc=!0,qc={on:{},be:{},af:{}},rc=0,sc=Fb.prototype;f(sc,"get",function(){return this.__.value}),f(sc,"ping",function(){}),f(sc,"update",function(){}),f(sc,"on",function(a,b){if("function"!=typeof b)throw"DataSource on need function";"change"===a&&this.listeners.change.push(b)}),f(sc,"bind",function(){});var tc=/\{\{.+?\}\}/g;jing={},jing.scope_types={INHERIT:Rb,CREATE:__SCOPE_TYPE_CREATE,PARENT:__SCOPE_TYPE_PARENT},jing.module=K,jing.require=J,jing.directive=function(a){var b=L(a,!1);return b?b[0].directive(b[1]):(j(a,": directive not found. no module."),null)},jing.factory=function(a){var b=L(a,!1);return b?b[0].factory(b[1]):(j(a,": factory not found. no module."),null)},jing.environment=function(){}}();