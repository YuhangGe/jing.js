!function(){function t(t,n){return function(){n.apply(t,arguments)}}function n(t,n,e){if("object"==typeof n)for(var i in n)t.style[i]=n[i];else t.style[n]=e}function e(t,n,e){return"undefined"==typeof e?t.getAttribute(n):void t.setAttribute(n,e)}function i(t,n){if(!(n instanceof Array))return t.hasAttribute(n);for(var e=0;e<n.length;e++)if(!t.hasAttribute(n[e]))return!1}function r(t,n){return"undefined"==typeof n?t.__JING_BIND_DATA__:void(t.__JING_BIND_DATA__=n)}function o(t,n){for(var e=0;e<t.length;e++)if(n(t[e],t[e],e)===!1)return}function u(t,n,e,i,r){Object.defineProperty(t,n,{value:e,writable:i?!0:!1,enumerable:r?!0:!1})}function c(t,n){return t.hasOwnProperty(n)}function f(t,n,e,i,r,o){var u={configurable:r?!0:!1,enumerable:o?!0:!1};e&&(u.get=e),i&&(u.set=i),Object.defineProperty(t,n,u)}function s(t,n,e){t.addEventListener(n,e)}function a(t,n){setTimeout(t,n)}function h(){console.log.apply(console,arguments)}function l(){}function p(t,n){var e={};u(this,"__",e),u(e,"watch",{}),u(this,"$$",{}),u(this,"$name",t),u(this,"$children",{}),u(this,"$parent",n?n:null)}function d(t){var n=this.$parent?this.$parent.name+"."+x++:"jing.scope."+x++,e=new p(n,t);return t&&u(t.$children,n,e,!1,!0),e}function v(t,n){var e={};u(this,"__",e),u(e,"factories",{}),u(e,"directives",{}),u(e,"runs",[]),u(e,"controllers",{}),u(this,"parent",n?n:null),u(this,"children",{}),u(this,"name",t)}function m(t,n){for(var e,i=t.split("."),r=C,o=0;o<i.length-1;o++){if(e=r[i[o]],!e)throw"require error: module "+t+" not found.";r=e.children}var u=e?e:n,c=i[i.length-1],f=u.factory(c);if(!f)throw"require error: factory "+t+" not found.";return f}function y(t){for(var n,e=t.split("."),i=C,r=null,o=0;o<e.length-1;o++)n=i[e[o]],n||(n=new v(e[o],r),u(i,e[o],n,!1,!0)),i=n.children,r=n;var f=e[e.length-1];return c(i,f)?i[f]:(n=new v(f,r),u(i,f,n),n)}function _(t,n){var e=t.trim().split(".");if(!n&&e.length<=1)return null;for(var i,r=n?e.length:e.length-1,o=0;r>o;o++)if(i=0===o?C[e[o]]:i.children[e[o]],!i)return null;return n?i:[i,e[e.length-1]]}function $(t,n,e){this.name=n,this.module=t,this.func=e}function g(t,n,e,i){this.name=n,this.module=t,this.state=0,this.scope_type="function"==typeof e?R:e,this.func="function"==typeof e?e:i,this.link_func=null}function w(t){if(0===t.state){t.state=999;var n=t.func(t.module);t.state=1,t.link_func=n}}function l(t){B[t.name]=t,G[t.module.path+"."+t.name]=t}function j(t,n,e){l(new g(O,t,n,e))}function b(t,n,r){var o=e(t,J).split(","),u=i(t,H)?e(t,H).split(","):[];0===o.length;var c,f,s,a,h,l;for(c=0;c<o.length;c++){if(f=o[c].trim(),s=u[c],a=G[f],!a)throw'directive "'+f+'" not found!';if(h=A(t,n,a,r,s),a.scope_type===D){if(l)throw"directive with scope_type:jing.scope_types.PARENT can be occur once on one element!";l=h}}return l}function A(t,n,e,i,r){w(e);var o=e.scope_type,u=e.link_func,c=o===q||o===D?i.$child():i;return u(n,e.module,c,t,r,e.name),c}function N(t,n,e){var r,o,u,c,f,s;if(i(t,J))s=b(t,n,e);else if(t.hasAttributes())for(u=t.attributes,r=0;r<u.length;r++)if(o=u[r],o.name!==J&&o.name!==H&&(c=B[o.name],c&&(f=A(t,n,c,e,o.value),c.scope_type===D))){if(s)throw"directive with scope_type:jing.scope_types.PARENT can be occur once on one element!";s=f}T(t,s?s:e);var a=t.children;for(r=0;r<a.length;r++)N(a[r],n,s?s:e)}function T(t,n){var e=t.childNodes;if(0!==e.length)for(var i=0;i<e.length;i++)if("#text"===e[i].nodeName){var r=e[i].textContent,o=r.match(/\{\{\s*([\w\d_]+)\s*\}\}/);if(o){var u=n.$get(o[1]);if(u){e[i].textContent=r.replace(o[0],u);var c=r.replace(o[0],"{{0}}");n.$watch(o[1],function(t,n,e){e.ele.textContent=e.tem.replace("{{0}}",n)},{ele:e[i],tem:c})}else h('"'+o[1]+'" not found in scope: '+n.$name)}}}var P=["push","pop","reverse","shift","sort","unshift","splice"],k=Array.prototype,x=0,E={},I=p.prototype;f(I,"$root",function(){return this.$parent?this.$parent.$root:this}),u(I,"$declare",function(t,n){var e=this;if("object"==typeof t)for(var i in t)e.$declare(i,t[i]);else"function"!=typeof n&&(n instanceof Array&&(o(P,function(i){n[i]=function(){var n=k[i].apply(this,arguments);return e.$emit(t),n}}),n.$set=function(n,i){this[n]=i,e.$emit(t)}),e.$$[t]=n,f(e,t,function(){return e.$$[t]},function(n){e.$$[t]!==n&&(e.$$[t]=n,e.$emit(t))},!0,!0))}),u(I,"$watch",function(t,n,e){if("function"!=typeof n)return void h("$watch need function");if(!c(this.$$,t)){if(!c(this,t))return void h('"'+t+'" of scope:'+this.name+" not found!");var i=this[t];delete this[t],this.$declare(t,i)}var r=this.__.watch;c(r,t)||(r[t]=[]),r[t].push({cb:n,data:e})}),u(I,"$emit",function(n){var e=this.__.watch,i=e[n];i&&0!==i.length&&a(t(this,function(){for(var t=0;t<i.length;t++)i[t].cb(n,this.$$[n],i[t].data)}),0)}),u(I,"$child",function(t){t||(t=this.$parent?this.$parent.name+"."+x++:"jing.scope."+x++);var n=this.$children;if(c(n,t))return n[t];var e=new p(t,this);return u(n,t,e,!1,!0),e}),u(I,"$get",function(t){if(c(this,t))return this[t];if(this.$parent)return this.$parent.$get(t);throw"scope does not have declare var:"+t}),u(I,"$set",function(t,n){if(c(this,t))this[t]=n;else{if(!this.$parent)throw"scope does not have declare var:"+t;this.$parent.set(t,n)}});var C={},O=new v("jing",null),R=0,q=1,D=2,M=v.prototype;u(M,"require",function(t){return m(t,this)}),f(M,"path",function(){return this.parent?this.parent.path+"."+this.name:this.name}),f(M,"root",function(){return this.parent?this.parent.root:this}),u(M,"drive",function(n){if(this.parent)throw'function "drive" can only be applied to root Module';var e=new p("jing.scope."+this.path+x++);return E[this.path]=e,setTimeout(t(this,function(){for(var t=0;t<this.__.runs.length;t++)this.__.runs[t](this,E[this.path]);N(n,this,e)}),0),this}),u(M,"factory",function(t,n){var e;if(n){this.__.factories.hasOwnProperty(t)&&h(t,":factory has been exists. override!");var i="function"==typeof n;return e={state:i?0:1,inst:i?null:n,func:i?n:null},this.__.factories[t]=e,this}if(e=this.__.factories[t],!e)return h(t,": factory not found!"),null;if(0===e.state)e.state=999,e.inst=e.func(this),e.state=1;else if(999===e.state)throw'factory "'+t+'" of Module "'+this.name+'" is loading. 可能的原因是产生了循环依赖。';return e.inst}),u(M,"directive",function(t,n,e){var i;return e?"function"!=typeof e?void h("directive need function"):(this.__.directives.hasOwnProperty(t)&&h("directive exists! override."),i=new g(this,t,n,e),this.__.directives[t]=i,l(i),this):(i=this.__.directives[t],i?(w(i,this),i.inst):null)}),u(M,"initialize",function(t){if(this.parent)throw'function "initialize" can only be applied to root Module';return"function"==typeof t&&this.__.runs.push(t),this}),u(M,"controller",function(t,n){var e=this.__.controllers;return n?"function"==typeof n?(u(e,t,new $(this,t,n)),this):(h("controller must be function"),this):e[t]});var z=$.prototype;z.bind_scope=function(t,n){this.func(t,n)};var B=(g.prototype,{}),G={};j("j-ctrl",D,function(){return function(t,n,e,i,r){var o;if(r.indexOf(".")>=0){var u=_(r,!1);if(!u)throw'j-ctrl: controller "'+r+'" not found. module not found.';o=u[0].controller(u[1])}else o=t.controller(r.trim());if(!o)throw'j-ctrl: controller "'+r+'" not found.';o.bind_scope(t,e)}}),j("j-click",function(){return function(n,e,i,r,o){var u=i[o];if("function"!=typeof u)throw"j-click need function.";s(r,"click",t(i,u))}}),j("j-model",function(){return function(t,n,i,o,u){"INPUT"===o.nodeName&&(r(o,i),s(o,"input",function(){r(this)[e(this,"j-model")]=this.value}),o.value=i[u],i.$watch(u,function(t,n,e){e.value=n},o))}}),j("j-repeat",function(){return function(t,e,i,o,u){function c(t,e){for(var i,o=t.parentNode,u=r(t),c=0;c<e.length;c++)i=t.cloneNode(!0),n(i,"display","block"),i.removeAttribute("j-repeat"),o.appendChild(i),u.push(i)}function f(t,n){for(var e=r(t),i=0;i<e.length;i++)e[i].parentNode.removeChild(e[i]);e.length=0,c(t,n)}var s=i[u];return!s instanceof Array?void h("j-repeat need Array!"):(n(o,"display","none"),r(o,[]),c(o,s),void i.$watch(u,function(t,n,e){f(e,n)},o))}});var J="j-directive-name",H="j-directive-value";jing={},jing.scope_types={INHERIT:R,CREATE:q,PARENT:D},jing.$on=s,jing.module=y,jing.require=m,jing.controller=function(t){var n=_(t,!1);return n?n[0].controller(n[1]):(h(t,": controller not found. no module."),null)},jing.directive=function(t){var n=_(t,!1);return n?n[0].directive(n[1]):(h(t,": directive not found. no module."),null)},jing.factory=function(t){var n=_(t,!1);return n?n[0].factory(n[1]):(h(t,": factory not found. no module."),null)},jing.scope=function(t){return t?E[t]:d()}}();