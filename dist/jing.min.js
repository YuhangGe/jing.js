/*** jing.js(https://github.com/YuhangGe/jing.js) ***/
!function(){function a(a,b){if("undefined"==typeof a||"undefined"==typeof b)throw console.trace(),"inherit error!";for(var c in b.prototype){var d=a.prototype[c];"undefined"==typeof d&&(a.prototype[c]=b.prototype[c])}if(a.__base_objects__=[],a.__base_objects__.push(b),"undefined"!=typeof b.__base_objects__)for(var e=0;e<b.__base_objects__.length;e++)a.__base_objects__.push(b.__base_objects__[e]);a.prototype.base=function(b){var c=null,d=void 0;return"undefined"==typeof this.__inherit_base_deep__?this.__inherit_base_deep__=0:this.__inherit_base_deep__++,c=a.__base_objects__[this.__inherit_base_deep__],d="undefined"==typeof b||null==b?c.call(this):b instanceof Array==!0?c.apply(this,b):c.apply(this,[].slice.call(arguments)),this.__inherit_base_deep__--,d},a.prototype.callBase=function(b,c){var d=null,e=void 0;"undefined"==typeof this.__inherit_deep__?this.__inherit_deep__=0:this.__inherit_deep__++,d=a.__base_objects__[this.__inherit_deep__];var f=d.prototype[b];if("function"!=typeof f)throw"There is no method:"+b+" in baseClass";return e="undefined"==typeof c||null===c?f.call(this):c instanceof Array==!0?f.apply(this,c):f.apply(this,[].slice.call(arguments,1)),this.__inherit_deep__--,e}}function b(a,b){for(var c in b)a[c]=b[c]}function c(a,b){return function(){b.apply(a,arguments)}}function d(a,b,c){return"undefined"==typeof c?a.getAttribute(b):void a.setAttribute(b,c)}function e(a,b){for(var c=0;c<a.length;c++)if(b(a[c],a[c],c)===!1)return}function f(a,b){for(var c=a.length,d=new Array(c),e=0;c>e;e++)d[e]=b(a[e],e);return d}function g(a,b,c,d,e){Object.defineProperty(a,b,{value:c,writable:d?!0:!1,enumerable:e?!0:!1})}function h(a,b){return a.hasOwnProperty(b)}function i(a,b,c,d,e,f){var g={configurable:e?!0:!1,enumerable:f?!0:!1};c&&(g.get=c),d&&(g.set=d),Object.defineProperty(a,b,g)}function j(a,b,c){a.addEventListener(b,c)}function k(){console.log.apply(console,arguments)}function l(a){return Array.isArray(a)}function m(a){return a instanceof J}function n(a,b){b.parentNode.insertBefore(a,b)}function o(a){a.parentNode.removeChild(a)}function p(a){return document.querySelectorAll(a)}function q(a,b){if(!b)return a;for(var c in b)a[c]=b[c];return a}function r(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}function s(a){return"string"==typeof a}function t(a){return"function"==typeof a}function u(a){return"number"==typeof a}function v(a){return null!==a&&"object"==typeof a}function w(a){return"undefined"==typeof a}function x(a){"complete"===document.readyState?a():document.addEventListener("DOMContentLoaded",a)}function y(a){function b(a){var c,d,e,f=a;if(m(a)||l(a))for(f=[],e=l(a)?a:a.__.array,c=0;c<e.length;c++)f.push(b(e[c]));else if(v(a)){f={};for(d in a)f[d]=b(a[d])}return f}return JSON.stringify(b(a))}function z(a){return JSON.parse(a)}function A(a){q(a,{method:"get",type:"json",data:{}}),new XMLHttpRequest}function B(a,b){g(this,"__",{prop:c(this,C),emit_tree:new F(this),name:a,children:{},parent:b?b:null})}function C(a,b){if(v(a))for(var c in a)this[c]=a[c];else this[a]=b}function D(a,b){var c=a.__.children,d=new B(b,a);return g(c,b,d,!0,!1),d}function E(a,b,c){this.id=a,this.env=b,this.I_emitter=null,this.L_emitter=null,this.children={},this.parent=c,this.path=(c.path?c.path+".":"")+a}function F(a){this.children={},this.env=a,this.path=null}function G(a){this.node=a,this.pre_value=a.val(),this.cur_value=this.pre_value,this.listeners=[]}function H(a){this.base(a),this.handler=c(this,this.deal),this.tm=null}function I(a){var b,c,d=a.__.array.length;if(0!==d)for(c=a.__.en.children,b=0;d>b;b++)h(c,b)||(c[b]=new E(b,a.__.en,a.__.en.env)),h(a,b)||!function(b){i(a,b,function(){return this.__.array[b]},function(a){var c=this.__.array[b];c!==a&&(this.__.array[b]=a,this.__.en.notify())},!0,!0)}(b)}function J(a,b){g(this,"__",{array:a,en:b}),g(this,ec,{}),I(this)}function K(a,b){this.handler=a,this.data=b}function L(a,b,c,d,e){this.handler=d,this.data=e,this.expr=b,this.var_tree=a,this.env=c,this.pre_value=null,this.cur_value=null,this.compare=!0}function M(a,b,d){this.handler=a,this.data=b,this.lazy=u(d)&&(d=Math.floor(d))>=0?d:0,this.timeout=null,this.delegate=c(this,this.deal),this.changes=[]}function N(a,b,c,d,e,f){this.base(d,e,f),this.expr=b,this.var_tree=a,this.env=c,this.pre_value=null,this.cur_value=null}function O(a){function b(a){a&&a.cached!==!1&&(a.cached=!1,b(a.parent))}a.cached=!1,b(a.parent)}function P(a,b,c,d){var e=l(c)?new J(c,d):c;return a[dc][b]=e,i(a,b,function(){return this[dc][b]},function(a){var c=this[dc],d=c[b];if(d!==a){if(d instanceof J&&l(a)&&(a=new J(a,d.__.en)),v(c[b])&&v(a)&&v(d)){var e=this[ec][b];R(e,a,d)}c[b]=a,this[ec][b].notify()}},!1,!0),e}function Q(a,b,c){var d=parseInt(b),e=a.__.array[d];return a[ec][d]=c,l(e)&&(e=a.__.array[d]=new J(e,c)),i(a,b,function(){return this.__.array[d]},function(a){var b=this.__.array[d];if(b!==a){if(v(b)&&v(a)){var c=this[ec][d];R(c,a)}this.__.array[d]=a,this.__.en.notify()}}),e}function R(a,b,c){var d,e,f,i,j=a.children,k=b[ec],l=c[ec];for(d in j)if(b instanceof J&&/^\d+$/.test(d))!h(k,d)&&h(l,d)&&(i=Q(b,d,a),R(j[d],i,c[d]));else{if(!h(b,d))continue;h(b,ec)||g(b,ec,{}),h(b,dc)?f=b[dc]:(f={},g(b,dc,f)),e=b[d],delete b[d],i=P(b,d,e,j[d]),R(j[d],i,c[d])}}function S(a,b,c){var d,e,f;if(a instanceof J){if("length"===b)return a.length;if(/^\d+$/.test(b))return h(a[ec],b)||Q(a,b,c),a[b]}if(h(a,ec)?f=a[ec]:(f={},g(a,ec,f)),h(a,dc)?d=a[dc]:(d={},g(a,dc,d)),h(d,b))h(f,b)||(f[b]=c);else{if(!h(a,b))throw"property "+b+" not found.";e=a[b],delete a[b],P(a,b,e,c),f[b]=c}return d[b]}function T(a,b,c,d){function e(a,b,c){var d=a.children[b];return d||(d=a.children[b]=new E(b,c,a)),d}if(0!==b.length){var f=a.$find(b[0]);if(!f)throw"variable "+b[0]+" not found!";var g,i,j,k,l,m=f,n=f.__.emit_tree;for(i=0;i<b.length;i++){if(!v(m))throw"$watch need object.";if(g=b[i],l=m[ec],l&&h(l,g)&&l[g].env!==f)throw new Error("Object只能属于一个Environment，如果要修改其所属于的Environment，先调用env.$remove(obj)");j=e(n,g,f),k=S(m,g,j),m=k,n=j}var o=d?j.L_emitter:j.I_emitter;null===o&&(d?(o=new H(j),j.L_emitter=o):(o=new G(j),j.I_emitter=o)),o.listeners.push(c)}}function U(a,b,c,d){var e=f(b.replace(/\[\s*(\d+)\s*\]/g,".$1.").replace(/\.{2}/g,".").split("."),function(a){return a.trim()});T(a,e,c,d)}function V(a,b,c){function d(a,b){var c=a.nodes[1];"constant"===c.type&&(b.push(c.value),a.parent&&"property"===a.parent.type&&d(a.parent,b))}if("variable"===a.type){var e=[a.var_name];a.parent&&"property"===a.parent.type&&d(a.parent,e),b.push(e);var f=e.join("."),g=c[f];g||(g=c[f]=[]),g.indexOf(a)<0&&g.push(a)}else for(var h=0;h<a.nodes.length;h++)V(a.nodes[h],b,c)}function W(a,b,c,d,e){var f=[],g={};if(V(b,f,g),0!==f.length){for(var h=e!==!1,i=h?new N(g,b,a,c,d,u(e)?e:0):new L(g,b,a,c,d),j=0;j<f.length;j++)T(a,f[j],i,h);return i.cur_value=i.pre_value=b.exec(a),i}}function X(a,b){var c={};g(this,"__",c),g(c,"factories",{}),g(c,"directives",{}),g(c,"runs",[]),g(c,"controllers",{}),g(c,"datasources",{}),g(c,"config",{}),g(this,"parent",b?b:null),g(this,"children",{}),g(this,"name",a)}function Y(a,b){for(var c,d=a.split("."),e=fc,f=0;f<d.length-1;f++){if(c=e[d[f]],!c)throw"require error: module "+a+" not found.";e=c.children}var g=c?c:b,h=d[d.length-1],i=g.factory(h);if(!i)throw"require error: factory "+a+" not found.";return i}function Z(a){for(var b,c=a.split("."),d=fc,e=null,f=0;f<c.length-1;f++)b=d[c[f]],b||(b=new X(c[f],e),g(d,c[f],b,!1,!0)),d=b.children,e=b;var i=c[c.length-1];return h(d,i)?d[i]:(b=new X(i,e),g(d,i,b),b)}function $(a,b){var c=a.trim().split(".");if(!b&&c.length<=1)return null;for(var d,e=b?c.length:c.length-1,f=0;e>f;f++)if(d=0===f?fc[c[f]]:d.children[c[f]],!d)return null;return b?d:[d,c[c.length-1]]}function _(a,b,c){this.name=b,this.module=a,this.func=c}function ab(a,b,c){this.name=b,this.module=a,this.state=0,this.func=c,this.link_func=null}function bb(){console.time("ttt");var a,b,c,d;for(a in ic)if(b=ic[a],!b.init){for(c=b.module.__.runs,d=0;d<c.length;d++)c[d].call(b.env,b.module,b.env);Zb(b.ele,b.module,b.env),Wb(),b.init=!0}console.timeEnd("ttt")}function cb(a){var b=Pb(a),c=ic[b];return c?c.env:null}function db(a,b){var c=Pb(b),d=ic[c];if(d)throw"element can't be driven more than once";d={init:!1,env:new B(c),ele:b,module:a},ic[c]=d}function eb(a){function b(a,b){kc[a]=b,lc[b.module.path+"."+a]=b}var c=a.name;if(l(c))for(var d=0;d<c.length;d++)b(c[d],a);else b(c,a)}function fb(a){if(0===a.state){a.state=999;var b=a.func(a.module);a.state=1,a.link_func=b}}function gb(a,b){eb(new ab(gc,a,b))}function hb(){}function ib(a,b,c,d){var e,f=b.removeNamedItem("j-env"),g=f.value.trim();if(g.indexOf(".")>=0){var h=$(g,!1);if(!h)throw'j-env: environment "'+g+'" not found. module not found.';e=h[0].env(h[1])}else e=c.env(g);if(!e)throw'j-env: environment "'+g+'" not found.';e.func.call(d,c,d)}function jb(a,b,c){this.ele=a,this.module=b,this.env=c}function kb(a,b,c,d){var e=b.removeNamedItem("j-include"),f=e.value,g=rb(f),h=g.exec(d);if(!s(h))throw"j-include need string.";var i=new jb(a,c,d);directive_put_inner(a,i),i.run(h)}function lb(a,b,e,f){this.ele=a,this.env=b,this.expr=e;var g=W(b,e,function(a,b){b.update(a[0].cur_value)},this,10);this.val=g.cur_value,this.val_key="value",this.val_event="input";var h=d(a,"type");switch(h){case"checkbox":this.val_key="checked",this.val_event="change"}this.ele[this.val_key]=this.val,f&&j(a,this.val_event,c(this,this.change))}function mb(a,b,c,d,e,f){if("INPUT"===d.nodeName){var g=rb(e);if("variable"!==g.type&&"property"!==g.type)throw"j-model only support settable expression";new lb(d,c,g,f)}}function nb(a,b,c,d,e,f){this.ele=a,this.cmt=document.createComment(a.outerHTML),this.env=e,this.expr=f,this.attr=b,this.key=d,this.module=c,this.frag=null;var g=W(e,f,function(a,b){b.update(a[0].cur_value)},this,10);g.compare=!1,this.val=g.cur_value,this.items=[],n(this.cmt,a),o(a),this.render()}function ob(a,b,c,d){var e=b.removeNamedItem("j-repeat"),f=e.value,g=rb(f,!0);if("in"!==g.type)throw"j-repeat format wrong!";new nb(a,b,c,g.nodes[0],d,g.nodes[1])}function pb(a,b){this.type=a,this.nodes=b?b:[],this.parent=null;for(var c=0;c<this.nodes.length;c++)this.nodes[c].parent=this;this.value=null,this.cached=!1,this.need_cached=!0}function qb(c,d,e){c.prototype._exec=d,e&&b(c.prototype,e),a(c,pb)}function rb(a,b){rc=!1,sc=null,tc=b?!0:!1,Ob(a);try{vb(),wb()}catch(c){console.log(c.message),console.log(c.stack)}var d;return 0===pc.length?d=new Hb:1===pc.length?d=pc[0]:(d=new pb("root",r(pc)),d.need_cached=tc),pc.length=0,null!==sc&&("emp"===d.type||"root"===d.type?sb():d=new Jb(sc,d)),d}function sb(){throw pc=[],qc=[],"parse error"}function tb(a){switch(a){case";":wb();break;case"(":rc&&(ub("F"),qc.push("A"),Bb(new Hb)),qc.push("(");break;case"[":rc?(ub("[]"),qc.push("(")):(qc.push("A"),Bb(new Hb),qc.push("("));break;case")":case"]":wb("(");break;case"+":case"-":case"++":case"--":ub(rc?"#"+a:a+"#");break;default:ub(a)}rc=")"===a||"]"===a}function ub(a){for(var b,c,d=uc[a];qc.length>0&&(b=qc[qc.length-1],c=uc[b],d[0]<c[0]||d[0]===c[0]&&0===d[1]);)qc.pop(),yb(b);qc.push(a)}function vb(){for(Nb();!xc;){switch(vc){case"var":switch(wc){case"true":case"false":Bb(new Gb("true"===wc)),rc=!0;break;case"in":if(0!==qc.length||1!==pc.length||"variable"!==pc[0].type||null!==sc)throw"grammar wrong: in";sc=pc.pop().var_name,rc=!1;break;default:Bb(new Mb(wc)),rc=!0}break;case"num":Bb(new Gb(Number(wc))),rc=!0;break;case"str":Bb(new Gb(wc.substring(1,wc.length-1))),rc=!0;break;case"op":tb(wc)}Nb()}}function wb(a){for(var b=null;qc.length>0&&(b=qc.pop(),!a||b!==a);)yb(b)}function xb(){var a=Ab(),b=Ab(),c="."===zb();if("array"===a.type){for(var d=!0,e=0;e<a.nodes.length;e++)if(!Cb(a.nodes[e])){d=!1;break}d&&(a=new Gb(a._exec()))}else if(!Cb(a))throw"parse_deal_op_F: something strange wrong.";c&&"variable"===b.type&&(b=new Gb(b.var_name));var f=new Ib(null,b,a);c&&(qc.pop(),a=Ab(),Cb(a)&&Cb(f.nodes[1])&&Cb(f.nodes[2])?f=new Gb(a.value[f.nodes[1].value].apply(a.value,f.nodes[2].value)):(f.nodes[0]=a,a.parent=f)),Bb(f)}function yb(a){var b,c,d;switch(a){case"F":xb();break;case"A":for(b=Ab(),d=new Db([]),c=!0;"empty"!==b.type;)d.nodes.unshift(b),b.parent=d,Cb(b)||(c=!1),b=Ab();c&&(d=new Gb(d._exec())),Bb(d);break;case",":break;case"[]":c=Ab(),b=Ab(),d=Cb(b)&&Cb(c)?new Gb(b.value[c.value]):new Kb(b,c),Bb(d);break;case".":c=Ab(),b=Ab(),c="variable"===c.type?new Gb(c.var_name):c,d=Cb(b)&&Cb(c)?new Gb(b.value[c.value]):new Kb(b,c),Bb(d);break;case"?":case":":c=Ab(),b=Ab(),Bb(new Fb(a,b,c));break;case"++#":case"--#":case"#++":case"#--":case"+#":case"-#":case"!":case"~":b=Ab(),d=new Eb(a,b),Cb(b)&&(d=new Gb(d.exec())),Bb(d);break;case"=":case"+=":case"-=":case"*=":case"/=":case"%=":case">>=":case">>>=":case"<<=":case"&=":case"^=":case"|=":c=Ab(),b=Ab(),d=new Lb(a,b,c),Bb(d);break;case"#+":case"#-":case"*":case"/":case"%":case"<<":case">>":case">>>":case"==":case"===":case">":case"<":case"&":case"&&":case"|":case"||":case"!=":case"!==":case"^":c=Ab(),b=Ab(),d=new Eb(a,b,c),Cb(b)&&Cb(c)&&(d=new Gb(d.exec())),Bb(d)}}function zb(){return qc.length>0?qc[qc.length-1]:null}function Ab(){return 0===pc.length&&sb(),pc.pop()}function Bb(a){a.need_cached=tc,pc.push(a)}function Cb(a){return"constant"===a.type}function Db(a){this.base("array",l(a)?a:[a])}function Eb(a,b,c){this.base("calc",c?[b,c]:[b]),this.operator=a}function Fb(a,b,c){var d=[b];"?"===a&&"condition"===c.type?[].push.apply(d,c.nodes):d.push(c),this.base("condition",d)}function Gb(a){this.base("constant",[]),this.value=a,this.cached=!0}function Hb(){this.base("empty")}function Ib(a,b,c){this.base("function",[a?a:new Hb,b,c])}function Jb(a,b){this.base("in",[a,b])}function Kb(a,b){this.base("property",[a,b])}function Lb(a,b,c){this.op=a,this.base("set",[b,c])}function Mb(a){this.base("variable",[]),this.var_name=a}function Nb(){if(!xc){var a=zc.exec(yc);if(!a)return void(xc=!0);wc=a[0];var b=wc.charCodeAt(0);vc=39===b||34===b?"str":b>=48&&57>=b?"num":b>=97&&122>=b||b>=65&&90>=b||36===b||95===b?"var":"op"}}function Ob(a){yc=a,zc.exec(""),xc=!1}function Pb(a){return a.id||(a.id="j.ele."+(Bc++).toString(36)),a.id}function Qb(a){a.__is_p_stoped=!1,a.stopPropagation=function(){this.__is_p_stoped=!0}}function Rb(a){return a.__is_p_stoped===!0}function Sb(a){var b,c,d,e,f=a.type,g=a.target||a.srcElement||a.originalTarget,i=Ac.on;if(h(i,f))for(b=i[f],Qb(a);!Rb(a)&&g;){if(d=g.id,d&&h(b,d))for(c=b[d],e=0;e<c.length;e++)c[e].call(g,a);g=g.parentElement}}function Tb(a,b,c){var d,e=Pb(a),f=Ac.on;h(f,b)?d=f[b]:(d=f[b]={},j(document.body,b,Sb));var g;g=h(d,e)?d[e]:d[e]=[],g.push(c)}function Ub(a){var b=/^\s*(\w+)\s*:(.+)$/.match(a);return null===b?null:{on:b[1],expr:b[2]}}function Vb(a,c){g(this,"name",a),g(this,"options",{direct:"s2c",type:"array"}),b(this.options,c);var d={};g(this,"__",d),d.listeners={change:[]};var e=this.options.type;d.value="object"===e?{}:"array"===e?[]:""}function Wb(){e(Dc,function(a){a.pos.parentNode.insertBefore(a.ele,a.pos)}),Dc.length=0}function Xb(a,b,c,d,e){fb(c);var f=c.link_func;f(b,c.module,d,a,e,c.name)}function Yb(a,b,c,d){var e,f,g,h=d;if(f=b.getNamedItem("j-async-env"),null!==f)return void hb(a,b,c,h);if(f=b.getNamedItem("j-include"),null!==f)return void kb(a,b,c,h);if(f=b.getNamedItem("j-repeat"),null!==f)return void ob(a,b,c,h);for(f=b.getNamedItem("j-directive-name"),e=0;e<b.length;e++)f=b[e],g=kc[f.name],g&&Xb(a,c,g,h,f.value);f=b.getNamedItem("j-env"),null!==f&&(h=d.$child(f.value),ib(a,b,c,h));var i=a.childNodes;for(e=0;e<i.length;e++){var j=i[e];Zb(j,c,h)}}function Zb(a,b,c){switch(a.nodeType){case 1:Yb(a,a.attributes,b,c);break;case 3:_b(a,c)}}function $b(a){for(var b,c=0,d=[];null!==(b=Ec.exec(a));)b.index>c&&d.push(new Gb(a.substring(c,b.index))),c=b.index+b[0].length,d.push(rb(b[1],!0));if(0===d.length)return null;if(c<a.length&&d.push(new Gb(a.substring(c))),1===d.length)return d[0];var e,f=d[0];"constant"===f.type&&s(f.value)||(d.unshift(new Gb("")),f=d[0]);for(var g=1;g<d.length;g++)e=d[g],f="constant"===f.type&&"constant"===e.type?new Gb(f.value+e.value):new Eb("#+",f,e);return f}function _b(a,b){var c=a.textContent,d=$b(c);if(null!==d){if("constant"===d.type)return void(a.textContent=d.value);var e=W(b,d,ac,{ele:a},10);a.textContent=e.cur_value}}function ac(a,b){b.ele.textContent=a[0].cur_value}var bc=B.prototype;i(bc,"$name",function(){return this.__.name}),i(bc,"$children",function(){return this.__.children}),i(bc,"$parent",function(){return this.__.parent}),i(bc,"$root",function(){return this.__.parent?this.__.parent.$root:this}),g(bc,"$destroy",function(){this.__.emit_tree.destroy();for(var a in this.__.children)this.__.children[a].$destroy();this.__.children=null,this.__.parent=null,this.__.emit_tree=null}),g(bc,"$child",function(a){var b=this.__.children;if(h(b,a))return b[a];var c=new B(a,this);return g(b,a,c,!1,!0),c}),g(bc,"$get",function(a){return h(this,a)?this[a]:this.__.parent?this.__.parent.$get(a):null}),g(bc,"$has",function(a){return h(this,a)?!0:this.__.parent?this.__.parent.$has(a):!1}),g(bc,"$find",function(a){return h(this,a)?this:this.__.parent?this.__.parent.$find(a):void 0}),g(bc,"$set",function(a,b){h(this,a)?this[a]=b:this.__.parent&&this.__.parent.$set(a,b)}),i(bc,"$prop",function(){return this.__.prop},function(){C.apply(this,arguments)}),E.prototype={val:function(a){var b=this.parent.val(this.id);return b&&!w(a)?b[a]:b},notify:function(){null!==this.I_emitter&&this.I_emitter.notify(),null!==this.L_emitter&&this.L_emitter.notify();for(var a in this.children)this.children[a].notify()},destroy:function(){null!==this.I_emitter&&this.I_emitter.destroy(),null!==this.L_emitter&&this.L_emitter.destroy();for(var a in this.children)this.children[a].notify();this.I_emitter=null,this.L_emitter=null,this.parent=null}},F.prototype={val:function(a){return this.env.$get(a)},destroy:function(){for(var a in this.children)this.children[a].destroy();this.env=null}},G.prototype={notify:function(){if(this.cur_value=this.node.val(),!(!this.cur_value instanceof J&&this.cur_value===this.pre_value)){for(var a=0;a<this.listeners.length;a++)this.listeners[a].notify(this.node.path,this.cur_value,this.pre_value);this.pre_value=this.cur_value}},destroy:function(){this.node=null,this.pre_value=null,this.cur_value=null;for(var a=0;a<this.listeners.length;a++)this.listeners[a].destroy();this.listeners.length=0}},H.prototype={notify:function(){null!==this.tm&&(clearTimeout(this.tm),this.tm=null),this.tm=setTimeout(this.handler,0)},deal:function(){this.tm=null,this.callBase("notify")}},a(H,G);var cc=J.prototype;e(["push","pop","shift","unshift","splice","sort","reverse"],function(a){g(cc,a,function(){var b=Array.prototype[a].apply(this.__.array,arguments);return I(this),this.__.en.notify(),b})}),e(["join","indexOf","fill","find"],function(a){g(cc,a,function(){return Array.prototype[a].apply(this.__.array,arguments)})}),g(cc,"slice",function(){return new J(Array.prototype.slice.apply(this.__.array,arguments),new E("emp",this.__.en))}),g(cc,"set",function(a,b){h(this,a)?this[a]=b:(this.__.array[a]=b,this.__.en.notify())}),g(cc,"get",function(a){return this.__.array[a]}),i(cc,"length",function(){return this.__.array.length},function(a){this.__.array.length=a,I(this),this.__.en.notify()}),g(cc,"destroy",function(){this.__.array.length=0,this.__.en=null}),K.prototype={notify:function(a,b,c){this.handler([{var_name:a,pre_value:c,cur_value:b}],this.data)}},L.prototype={notify:function(a){var b=this.var_tree[a];b&&(O(b),this.cur_value=this.expr.exec(this.env),this.compare&&this.cur_value===this.pre_value||(this.handler([{expr:this.expr,env:this.env,pre_value:this.pre_value,cur_value:this.cur_value}],this.data),this.pre_value=this.cur_value))},destroy:function(){this.data=null,this.handler=null,this.expr=null,this.var_tree=null,this.pre_value=null,this.cur_value=null}},M.prototype={notify:function(a,b,c){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.changes.push({var_name:a,pre_value:c,cur_value:b}),this.timeout=setTimeout(this.delegate,this.lazy)},deal:function(){this.handler(this.changes,this.data),this.changes.length=0},destroy:function(){this.handler=null,this.data=null,this.changes.length=0}},N.prototype={deal:function(){var a,b,c,d;for(a=0;a<this.changes.length;a++)if(b=this.changes[a],c=this.var_tree[b.var_name])for(d=0;d<c.length;d++)c[d].cached=!1,O(c[d]);this.changes.length=0,this.cur_value=this.expr.exec(this.env),(m(this.cur_value)||this.cur_value!==this.pre_value)&&(this.handler([{pre_value:this.pre_value,cur_value:this.cur_value}],this.data),this.pre_value=this.cur_value)},destroy:function(){this.data=null,this.handler=null,this.expr=null,this.env=null,this.var_tree=null,this.pre_value=null,this.cur_value=null}},a(N,M);var dc="__$jing.0210.prop$__",ec="__$jing.0210.emit$__";g(bc,"$watch",function(a,b,c,d){if("function"!=typeof b)return void k("$watch need function");var e,f,g=d===!1;if(f=g?new K(b,c):new M(b,c,u(d)?d:0),s(a))U(this,a,f,!g);else if(l(a))for(e=0;e<a.length;e++)U(this,a[e],f,!g);else k("$watch wrong format")});var fc={},gc=new X("jing",null),hc=X.prototype;g(hc,"require",function(a){return Y(a,this)}),i(hc,"path",function(){return this.parent?this.parent.path+"."+this.name:this.name}),i(hc,"root",function(){return this.parent?this.parent.root:this}),g(hc,"factory",function(a,b){var c;if(b){this.__.factories.hasOwnProperty(a)&&k(a,":factory has been exists. override!");var d="function"==typeof b;return c={state:d?0:1,inst:d?null:b,func:d?b:null},this.__.factories[a]=c,this}if(c=this.__.factories[a],!c)return k(a,": factory not found!"),null;if(0===c.state)c.state=999,c.inst=c.func(this),c.state=1;else if(999===c.state)throw'factory "'+a+'" of Module "'+this.name+'" is loading. 可能的原因是产生了循环依赖。';return c.inst}),g(hc,"directive",function(a,b,c){var d;return c?"function"!=typeof c?void k("directive need function"):(this.__.directives.hasOwnProperty(a)&&k("directive exists! override."),d=new ab(this,a,b,c),this.__.directives[a]=d,eb(d),this):(d=this.__.directives[a],d?(fb(d,this),d.inst):null)}),g(hc,"env",function(a,b){var c=this.__.controllers;return b?"function"==typeof b?(g(c,a,new _(this,a,b)),this):(k("controller must be function"),this):c[a]}),g(hc,"data",function(a,b){var c=this.__.datasources;if("function"!=typeof b){var d=c[a];if(!d)throw'Data Source "'+a+'" not found.';return 0===d.state&&(d.inst=new Vb(a,d.func(this)),d.state=1),d.inst.value}c[a]={state:0,func:b,inst:null}});var ic=(ab.prototype,{}),jc=!1;x(function(){jc||(jc=!0)}),g(hc,"drive",function(a){if(this.parent)throw'function "drive" can only be applied to root Module';return s(a)&&(a=document.querySelector(a)),db(a),jc&&bb(),this}),g(hc,"init",function(a){if(this.parent)throw'function "init" can only be applied to root Module';return"function"==typeof a&&this.__.runs.push(a),this}),g(hc,"conf",function(a){for(var b in a)this.__.config[b]=a[b];return this});var kc={},lc={};x(function(){var a=p("*[j-app]");0!==a.length&&(e(a,function(a){var b=d(a,"j-app"),c=Z(b);db(c,a)}),bb())}),gb("j-class",function(){function a(a,b,c){a.className=(a.className.replace(b.trim(),"")+" "+c).trim()}return function(b,c,d,e,f){var g=rb(f,!0),h=W(d,g,function(b,c){a(c,b[0].pre_value,b[0].cur_value)},e,10);a(e,"",h.cur_value)}}),gb("j-if",function(){return function(){throw"j-if has not been implemented"}});var mc=jb.prototype;mc.run=function(a){A({url:a,method:"get",type:"text",success:c(this,this.success),error:c(this,this.error)})},mc.success=function(a){var b,c=this.ele,d=c.parentNode,e=document.createElement("div"),f=document.createDocumentFragment(),g=e.childNodes,h=g.length;for(e.innerHTML=a,b=0;h>b;b++)Zb(g[b],this.module,this.env),f.appendChild(g[b]);d.insertBefore(f,c),d.removeChild(c)},mc.error=function(){this.ele.innerHTML='<p class="j-include-error">Error at j-include.</p>'},mc.destroy=function(){this.ele=null,this.module=null,this.env=null};var nc=lb.prototype;nc.change=function(){this.val=this.ele[this.val_key],this.expr.set(this.env,this.val)},nc.update=function(a){this.val!==a&&(this.ele[this.val_key]=a,this.val=a)},nc.destroy=function(){this.ele=null,this.expr.destroy(),this.expr=null},gb("j-model",function(){return function(a,b,c,d,e){mb(a,b,c,d,e,!0)}}),gb("j-value",function(){return function(a,b,c,d,e){mb(a,b,c,d,e,!1)}}),gb("j-on",function(){return function(a,b,c,d,e){var f=Ub(e);if(!f)throw"j-on format wrong.";var g=rb(f.expr);Tb(d,f.on,function(){g.exec(c)})}}),gb("j-enter",function(){return function(a,b,c,d,e){var f=rb(e);Tb(d,"keydown",function(a){13===a.keyCode&&f.exec(c)})}}),e(["j-click","j-dblclick","j-mousedown"],function(a){var b=a.substring(2);gb(a,function(){return function(a,c,d,e,f){var g=rb(f);Tb(e,b,function(){g.exec(d)})}})}),e(["j-blur","j-focus","j-change"],function(a){var b=a.substring(2);gb(a,function(){return function(a,c,d,e,f){var g=rb(f);j(e,b,function(){g.exec(d)})}})});var oc=nb.prototype;oc.update=function(a){for(var b=0;b<this.items.length;b++){var c=this.items[b];o(c.ele);var d=c.env,e=c.val,f=e[ec];if(f){for(var g in f)f[g].env===d&&delete f[g];c.env=null,c.ele=null,c.val=null}}this.items.length=0,this.val=a,this._get(),Dc.push({ele:this.frag,pos:this.cmt}),Wb()},oc._get=function(){var a=this.val;if(!(a instanceof J))throw"only support Array in j-repeat.";for(var b,c,d=document.createDocumentFragment(),e=0;e<a.length;e++)b=this.ele.cloneNode(!0),c=D(this.env,e),c.$prop={"@index":e,"@item":a[e],"@first":0===e,"@last":e===a.length-1,"@middle":0!==e&&e!==a.length-1,"@key":e},c[this.key]=a[e],Yb(b,this.attr,this.module,c),d.appendChild(b),this.items.push({ele:b,env:c,val:a[e]});this.frag=d},oc.render=function(){this._get(),Dc.push({ele:this.frag,pos:this.cmt})},function(){function a(a,b){a.style.setProperty("display",b?"":"none","")}function b(b,c,d,e,f,g){var h=rb(f),i=W(d,h,g?function(b,c){a(c.ele,b[0].cur_value?!0:!1)}:function(b,c){a(c.ele,b[0].cur_value?!1:!0)},{ele:e},10),j=i.cur_value,k=g?j?!0:!1:j?!1:!0;a(e,k)}gb("j-show",function(){return function(a,c,d,e,f){b(a,c,d,e,f,!0)}}),gb("j-hide",function(){return function(a,c,d,e,f){b(a,c,d,e,f,!1)}})}(),gb("j-style",function(){function a(a){var b=a.replace(/[-_](\w)/g,function(a,b){return b.toUpperCase()});if(b in c.style)return a;for(var f,g=b.charAt(0).toUpperCase()+b.slice(1),h=e.length;h--;)if(f=e[h]+g,f in c.style)return d[h]+a;return!1}function b(b,c){var d,e,g,h;if(v(c))for(d in c){if(e=a(d),!e)return;g=c[d],h=f.test(g),h?(g=g.replace(f,""),b.style.setProperty(e,g,"important")):b.style.setProperty(e,g,"")}else b.style=l(c)?c.join(";"):c}var c=document.createElement("div"),d=["-webkit-","-moz-","-ms-"],e=["Webkit","Moz","ms"],f=/!important;?$/;return function(a,c,d,e,f){var g=$b(f);null===g&&(g=rb(f,!0));var h=W(d,g,function(a,c){b(c.ele,a[0].cur_value)},{ele:e},10);b(e,h.cur_value)}}),pb.prototype={increment:function(a){return this.exec(a)},_exec:function(a){return this.nodes[0].exec(a)},exec:function(a){if(this.need_cached){var b;return this.cached?b=this.value:(b=this._exec(a),this.value=b,this.cached=!0),b}return this._exec(a)},set:function(){},destroy:function(){for(var a=this.nodes,b=0;b<a.length;b++)a[b].destroy(),a[b]=null;a.length=0,this.nodes=null}};var pc=[],qc=[],rc=!1,sc=null,tc=!0,uc={A:[400,0],".":[200,0],"[]":[200,0],F:[300,0],"#++":[90,0],"#--":[90,0],"!":[80,1],"~":[80,1],"+#":[80,1],"-#":[80,1],"++#":[80,1],"--#":[80,1],"*":[70,0],"/":[70,0],"%":[70,0],"#+":[60,0],"#-":[60,0],"<<":[50,0],">>":[50,0],">>>":[50,0],"<":[40,0],">":[40,0],"<=":[40,0],">=":[40,0],"==":[30,0],"===":[30,0],"!=":[30,0],"!==":[30,0],"&":[20,0],"^":[19,0],"|":[18,0],"&&":[17,0],"||":[16,0],"?":[15,1],":":[15,1],"=":[10,1],">>=":[10,1],"<<=":[10,1],">>>=":[10,1],"+=":[10,1],"-=":[10,1],"*=":[10,1],"/=":[10,1],"%=":[10,1],"&=":[10,1],"^=":[10,1],"|=":[10,1],"->":[-10,0],",":[-20,0],"(":[-1e3,0]};qb(Db,function(a){for(var b=[],c=0;c<this.nodes.length;c++)b.push(this.nodes[c].exec(a));return b},{concat:function(a,b){var c="array"===a.type?a.nodes:[a];b?[].unshift.apply(this.nodes,c):[].push.apply(this.nodes,c)}}),qb(Eb,function(a){var b=this.nodes;switch(this.operator){case"#+":return b[0].exec(a)+b[1].exec(a);case"#-":return b[0].exec(a)-b[1].exec(a);case"+#":return 0+b[0].exec(a);case"-#":return 0-b[0].exec(a);case"*":return b[0].exec(a)*b[1].exec(a);case"/":return b[0].exec(a)/b[1].exec(a);case"#++":return b[0].increment(a,!0,!1);case"#--":return b[0].increment(a,!1,!1);case"++#":return b[0].increment(a,!0,!1);case"--#":return b[0].increment(a,!1,!0);case"!":return!b[0].exec(a);case">":return b[0].exec(a)>b[1].exec(a);case"<":return b[0].exec(a)<b[1].exec(a);case">>":return b[0].exec(a)>>b[1].exec(a);case">>>":return b[0].exec(a)>>>b[1].exec(a);case"<<":return b[0].exec(a)<<b[1].exec(a);case"==":return b[0].exec(a)==b[1].exec(a);case"===":return b[0].exec(a)===b[1].exec(a)}}),qb(Fb,function(a){var b=this.nodes;return b[0].exec(a)?b[1].exec(a):b[2].exec(a)}),qb(Gb,function(){return this.value},{exec:function(){return this.value},increment:function(a,b){return this.value+(b?1:0)}}),qb(Hb,function(){return null}),qb(Ib,function(a){var b,c,d=this.nodes[1].exec(a);if("empty"===this.nodes[0].type?(b=d,c=a):(c=this.nodes[0].exec(a),b=c[d]),t(b)){var e=this.nodes[2].exec(a);return b.apply(c,e)}},{toString:function(){return"func"}}),qb(Jb,function(){}),qb(Kb,function(a){var b=this.nodes[0].exec(a),c=this.nodes[1].exec(a);return b?b[c]:null},{increment:function(a,b,c){var d=this.nodes[0].exec(a),e=this.nodes[1].exec(a);if(null!==d&&h(d,e)){var f=d[e],g=f+(b?1:-1);return d[e]=g,c?g:f}return null},set:function(a,b){var c=this.nodes[0].exec(a),d=this.nodes[1].exec(a);c[d]=b}}),qb(Lb,function(a){var b=this.nodes[1].exec(a),c=this.nodes[0].exec(a),d=b;switch(this.op){case"=":break;case">>=":d=c>>b;break;case"<<=":d=c<<b;break;case">>>=":d=c>>>b;break;case"+=":d=c+b;break;case"-=":d=c-b;break;case"*=":d=c*b;break;case"%=":d=c%b;break;case"/=":d=c/b;break;case"&=":d=c&b;break;case"^=":d=c^b;break;case"|=":d=c|b}return this.nodes[0].set(a,d),d}),qb(Mb,function(a){return a.$get(this.var_name)},{increment:function(a,b,c){var d=this.exec(a),e=d+(b?1:-1);return a.$set(this.var_name,e),c?e:d},set:function(a,b){a.$set(this.var_name,b)}});var vc="",wc="",xc=!1,yc="",zc=new RegExp("(?:\\+(?:\\+?)(?:=?))|(?:\\-(?:\\-?)(?:=?))|(?:\\*(?:=?))|(?:\\/(?:=?))|(?:%(?:=?))|(?:\\!(?:={0,2}))|(?:~(?:=?))|(?:&(?:&|=)?)|(?:\\|(?:\\||=)?)|(?:\\^(?:=?))|(?:>(?:>{0,2})(?:=?))|(?:<(?:<?)(?:=?))|(?:=(?:={0,2}))|\\(|\\)|\\[|\\]|\\{|\\}|\\.|\\?|\\:|;|,|(?:\"[^\"]*\")|(?:'[^']*')|(?:\\d+(?:\\.\\d+)?)|(?:[a-zA-Z$_][a-zA-Z0-9$_]*)","g"),Ac={on:{},be:{},af:{}},Bc=0,Cc=Vb.prototype;g(Cc,"get",function(){return this.__.value}),g(Cc,"ping",function(){}),g(Cc,"update",function(){}),g(Cc,"on",function(a,b){if("function"!=typeof b)throw"DataSource on need function";"change"===a&&this.listeners.change.push(b)}),g(Cc,"bind",function(){});var Dc=[],Ec=/\{\{(.+?)\}\}/g;jing={},jing.module=Z,jing.require=Y,jing.directive=function(a){var b=$(a,!1);return b?b[0].directive(b[1]):(k(a,": directive not found. no module."),null)},jing.factory=function(a){var b=$(a,!1);return b?b[0].factory(b[1]):(k(a,": factory not found. no module."),null)},jing.ready=x,jing.env=cb,jing.JSONStringify=y,jing.JSONParse=z,jing.each=e,jing.map=f}();