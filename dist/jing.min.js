/*** jing.js(https://github.com/YuhangGe/jing.js) ***/
!function(){function a(a,b){if("undefined"==typeof a||"undefined"==typeof b)throw console.trace(),"inherit error!";for(var c in b.prototype){var d=a.prototype[c];"undefined"==typeof d&&(a.prototype[c]=b.prototype[c])}if(a.__base_objects__=[],a.__base_objects__.push(b),"undefined"!=typeof b.__base_objects__)for(var e=0;e<b.__base_objects__.length;e++)a.__base_objects__.push(b.__base_objects__[e]);a.prototype.base=function(b){var c=null,d=void 0;return"undefined"==typeof this.__inherit_base_deep__?this.__inherit_base_deep__=0:this.__inherit_base_deep__++,c=a.__base_objects__[this.__inherit_base_deep__],d="undefined"==typeof b||null==b?c.call(this):b instanceof Array==!0?c.apply(this,b):c.apply(this,[].slice.call(arguments)),this.__inherit_base_deep__--,d},a.prototype.callBase=function(b,c){var d=null,e=void 0;"undefined"==typeof this.__inherit_deep__?this.__inherit_deep__=0:this.__inherit_deep__++,d=a.__base_objects__[this.__inherit_deep__];var f=d.prototype[b];if("function"!=typeof f)throw"There is no method:"+b+" in baseClass";return e="undefined"==typeof c||null===c?f.call(this):c instanceof Array==!0?f.apply(this,c):f.apply(this,[].slice.call(arguments,1)),this.__inherit_deep__--,e}}function b(a,b){for(var c in b)a[c]=b[c]}function c(a,b){return function(){b.apply(a,arguments)}}function d(a,b,c,d){Object.defineProperty(a,b,{value:c,writable:d?!0:!1,enumerable:!0})}function e(a,b){return a.hasOwnProperty(b)}function f(a,b,c,d,e,f){var g={configurable:e?!0:!1,enumerable:f?!0:!1};c&&(g.get=c),d&&(g.set=d),Object.defineProperty(a,b,g)}function g(){console.log.apply(console,arguments)}function h(a){return"string"==typeof a}function i(a){return"function"==typeof a}function j(a){return"number"==typeof a}function k(a){return null!==a&&"object"==typeof a}function l(a){"complete"===document.readyState?a():document.addEventListener("DOMContentLoaded",a)}function m(a){function b(a){var c,d,e,f=a;if(t(a)||s(a))for(f=[],e=s(a)?a:a.__.array,c=0;c<e.length;c++)f.push(b(e[c]));else if(k(a)){f={};for(d in a)d!==qc&&d!==pc&&(f[d]=b(a[d]))}return f}return JSON.stringify(b(a))}function n(a){return JSON.parse(a)}function o(a){u(a,{method:"get",type:"json",data:{}}),new XMLHttpRequest}function p(a,b){for(var c=a.length,d=new Array(c),e=0;c>e;e++)d[e]=b(a[e],e);return d}function q(a,b){for(var c=0;c<a.length;c++)if(b(a[c],a[c],c)===!1)return}function r(a,b){function c(a,b){for(var c in b)if(a[c]!==b[c])return!1;return!0}var d,e=a;if(i(b))e=a.filter(b);else if(k(b))for(e=[],d=0;d<a.length;d++)c(a[d],b)&&e.push(a[d]);return e}function s(a){return Array.isArray(a)}function t(a){return a instanceof N}function u(a,b){if(!b)return a;for(var c in b)a[c]=b[c];return a}function v(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}function w(a,b){var c,d,e=a.parentNode;e===b.parentNode&&(d=b.previousElementSibling,d?c=!0:(d=b.nextElementSibling,c=!1),e.insertBefore(b,a),d!==a&&(c?e.insertBefore(a,d):e.appendChild(a)))}function x(a,b,c){a.addEventListener(b,c)}function y(a,b){b.parentNode.insertBefore(a,b)}function z(a){a.parentNode.removeChild(a)}function A(a){return document.querySelectorAll(a)}function B(a,b,c){return"undefined"==typeof c?a.getAttribute(b):void a.setAttribute(b,c)}function C(a,b){if(!(b instanceof Array))return a.hasAttribute(b);for(var c=0;c<b.length;c++)if(!a.hasAttribute(b[c]))return!1}function D(a,b){a.removeAttribute(b)}function E(a,b){d(this,"__",{prop:c(this,F),bind:c(this,G),emit_tree:new J("env.root"),name:a,children:{},parent:b?b:null,listeners:{},jarray:null,index:0})}function F(a,b){if(k(a))for(var c in a)this[c]=a[c];else this[a]=b}function G(a,b){function c(a,b){if(e(this,a))throw new Error("variable"+a+" has been registered");var c=environment_split_var(b),d=this.$find(c[0]);if(!d||d===this)throw new Error("variable "+c[0]+" not found in $bind");var g=new ImmListener;Y(d,c[0],g,!1),$(g);for(var h=d.__.emit_tree,i=0;i<c.length;i++)h=h.children[c[i]];f(this,a,function(){for(var a=d[c[0]],b=1;b<c.length;b++)a=a[c[b]];return a},function(a){for(var b=d,e=c[0],f=0;f<c.length-1;f++)b=b[c[f]],e=c[f+1];b[e]=a});var j=new I(a,this.__.emit_tree);j.L_emitter=h.L_emitter,j.I_emitter=h.I_emitter,this.__.emit_tree.children[a]=j,this[qc][a]=j}if(k(a))for(var d in a)c.call(this,d,a[d]);else c.call(this,a,b)}function H(a,b){var c=a.__.children,e=new E(b,a);return d(c,b,e,!0,!1),e}function I(a,b){this.id=a,this.L_emitter=null,this.children={},this.parent=b,this.path=(b.path?b.path+".":"")+a,this.I_emitter=new K(this.path),this.L_emitter=new K(this.path)}function J(a){this.id=a,this.children={},this.path=""}function K(a){this.listeners=[],this.path=a}function L(a){this.base(a),this.handler=c(this,this.deal),this.tm=null,this.et=""}function M(a){var b,c=a.__.up,d=a.__.array.length;if(0!==d){for(b=c;d>b;b++)e(a,b)||!function(b){f(a,b,function(){return this.__.array[b]},function(a){var c=this.__.array[b];c!==a&&(this.__.array[b]=a,this.__.en.item_notify(b))},!0,!0)}(b);a.__.up=d}}function N(a,b){d(this,"__",{array:a,en:b,up:0}),d(this,qc,{}),M(this)}function O(a,b){this.id=(oc++).toString(36),this.handler=a,this.data=b,this.emitters=[]}function P(a,b,d){this.base(a,b),this.lazy=j(d)&&(d=Math.floor(d))>=0?d:0,this.tm=null,this.dg=c(this,this._deal),this.changes=[]}function Q(a,b,c,d,e){this.base(d,e),this._init(a,b,c)}function R(a,b,c,d,e,f){this.base(d,e,f),Q.prototype._init.call(this,a,b,c)}function S(a){a.expr.destroy(),a.expr=null,a.env=null;for(var b in a.var_tree)delete a.var_tree[b];a.var_tree=null,a.pre_value=null,a.cur_value=null}function T(a){function b(a){a&&a.cached!==!1&&(a.cached=!1,b(a.parent))}a.cached=!1,b(a.parent)}function U(a,b,c,d){var e=s(c)?new N(c,d):c;return a[pc][b]=e,f(a,b,function(){return this[pc][b]},function(a){var c=this[pc],d=c[b];if(d!==a){var e=t(d),f=s(a);if(e&&f)a=new N(a,d.__.en);else if(e!==f)throw new Error("暂时不允许在Array和非Array类型之间进行切换赋值。");if(k(c[b])&&k(a)&&k(d)){var g=this[qc][b];W(g,a,d)}c[b]=a,this[qc][b].notify()}},!1,!0),e}function V(a,b,c){var d=parseInt(b),e=a.__.array[d];return a[qc][b]=c,s(e)&&(e=a.__.array[d]=new N(e,c)),f(a,b,function(){return this.__.array[d]},function(a){var b=this.__.array[d];if(b!==a){if(k(b)&&k(a)){var c=this[qc][d];W(c,a)}this.__.array[d]=a,this.__.en.item_notify(d)}}),e}function W(a,b,c){var f,g,h,i,j=a.children,k=b[qc],l=c[qc];for(f in j)if(b instanceof N&&/^\d+$/.test(f))!e(k,f)&&e(l,f)&&(i=V(b,f,a),W(j[f],i,c[f]));else{if(!e(b,f))continue;e(b,qc)||d(b,qc,{}),e(b,pc)?h=b[pc]:(h={},d(b,pc,h)),g=b[f],delete b[f],i=U(b,f,g,j[f]),W(j[f],i,c[f])}}function X(a,b,c){var f,g,h;if(a instanceof N){if("length"===b)return a.length;if(/^\d+$/.test(b))return e(a[qc],b)||V(a,b,c),a[b]}if(e(a,qc)?h=a[qc]:(h={},d(a,qc,h)),e(a,pc)?f=a[pc]:(f={},d(a,pc,f)),!e(f,b)){if(!e(a,b))throw"property "+b+" not found.";g=a[b],delete a[b],U(a,b,g,c),h[b]=c}return a[b]}function Y(a,b,c,d){function e(a,b){var c=a.children[b];return c||(c=a.children[b]=new I(b,a)),c}if(0!==b.length){var f=a.$find(b[0]);if(!f)throw"variable "+b[0]+" not found!";var g,h,i,j,l,m=f,n=f.__.emit_tree;for(h=0;h<b.length;h++){if(!k(m))throw"$watch need object.";g=b[h],l=m[qc],i=e(n,g),j=X(m,g,i),m=j,n=i}(d?i.L_emitter:i.I_emitter).addListener(c)}}function Z(a){return a.replace(/\[\s*(\d+)\s*\]/g,".$1.").replace("..",".","g").split(".")}function $(a){q(a.emitters,function(b){var c=b.listeners.indexOf(a);c>=0&&b.listeners.splice(c,1)}),a.destroy()}function _(a,b,c){function d(a,b){var c=a.nodes[1];"constant"===c.type&&(b.push(c.value),a.parent&&"property"===a.parent.type&&d(a.parent,b))}if("variable"===a.type){var e=[a.var_name];a.parent&&"property"===a.parent.type&&d(a.parent,e),b.push(e);var f=e.join("."),g=c[f];g||(g=c[f]=[]),g.indexOf(a)<0&&g.push(a)}else for(var h=0;h<a.nodes.length;h++)_(a.nodes[h],b,c)}function ab(a,b,c,d,e){var f=[],g={};if(_(b,f,g),0!==f.length){"property"===b.type;for(var h=e!==!1,i=h?new R(g,b,a,c,d,j(e)?e:0):new Q(g,b,a,c,d),k=0;k<f.length;k++)Y(a,f[k],i,h);return a.__.listeners[i.id]=i,i.cur_value=i.pre_value=b.exec(a),i}}function bb(a,b){var c={};d(this,"__",c),d(c,"factories",{}),d(c,"directives",{}),d(c,"runs",[]),d(c,"controllers",{}),d(c,"datasources",{}),d(c,"config",{}),d(this,"parent",b?b:null),d(this,"children",{}),d(this,"name",a)}function cb(a,b){for(var c,d=a.split("."),e=rc,f=0;f<d.length-1;f++){if(c=e[d[f]],!c)throw"require error: module "+a+" not found.";e=c.children}var g=c?c:b,h=d[d.length-1],i=g.factory(h);if(!i)throw"require error: factory "+a+" not found.";return i}function db(a){for(var b,c=a.split("."),f=rc,g=null,h=0;h<c.length-1;h++)b=f[c[h]],b||(b=new bb(c[h],g),d(f,c[h],b,!1,!0)),f=b.children,g=b;var i=c[c.length-1];return e(f,i)?f[i]:(b=new bb(i,g),d(f,i,b),b)}function eb(a,b){var c=a.trim().split(".");if(!b&&c.length<=1)return null;for(var d,e=b?c.length:c.length-1,f=0;e>f;f++)if(d=0===f?rc[c[f]]:d.children[c[f]],!d)return null;return b?d:[d,c[c.length-1]]}function fb(a,b,c){this.name=b,this.module=a,this.func=c}function gb(a,b,c){this.name=b,this.module=a,this.state=0,this.func=c,this.link_func=null}function hb(){console.time("ttt");var a,b,c,d;for(a in uc)if(b=uc[a],!b.init){for(c=b.module.__.runs,d=0;d<c.length;d++)c[d].call(b.env,b.module,b.env);ic(b.ele,b.module,b.env),fc(),b.init=!0}console.timeEnd("ttt")}function ib(a){var b=$b(a),c=uc[b];return c?c.env:null}function jb(a,b){var c=$b(b),d=uc[c];if(d)throw"element can't be driven more than once";d={init:!1,env:new E(c),ele:b,module:a},uc[c]=d}function kb(a){function b(a,b){wc[a]=b,xc[b.module.path+"."+a]=b}var c=a.name;if(s(c))for(var d=0;d<c.length;d++)b(c[d],a);else b(c,a)}function lb(a){if(0===a.state){a.state=999;var b=a.func(a.module);a.state=1,a.link_func=b}}function mb(a,b){kb(new gb(sc,a,b))}function nb(){}function ob(a,b,c,d){var e,f=b.removeNamedItem("j-env"),g=f.value.trim();if(g.indexOf(".")>=0){var h=eb(g,!1);if(!h)throw'j-env: environment "'+g+'" not found. module not found.';e=h[0].env(h[1])}else e=c.env(g);if(!e)throw'j-env: environment "'+g+'" not found.';e.func.call(d,c,d)}function pb(a,b,c){this.ele=a,this.module=b,this.env=c}function qb(a,b,c,d){var e=b.removeNamedItem("j-include"),f=e.value,g=Cb(f),i=g.exec(d);if(!h(i))throw"j-include need string.";var j=new pb(a,c,d);directive_put_inner(a,j),j.run(i)}function rb(a,b,d,e){this.ele=a,this.env=b,this.expr=d;var f=ab(b,d,function(a,b){b.update(a[0].cur_value)},this,10);this.val=f.cur_value,this.val_key="value",this.val_event="input";var g=B(a,"type");switch(g){case"checkbox":this.val_key="checked",this.val_event="change"}this.ele[this.val_key]=this.val,e&&x(a,this.val_event,c(this,this.change))}function sb(a,b,c,d,e,f){if("INPUT"===d.nodeName){var g=Cb(e,!1);if("variable"!==g.type&&"property"!==g.type)throw"j-model only support settable expression";new rb(d,c,g,f)}}function tb(a,b,c,e){a.__.jarray=c,a.__.index=e;var g=c.__.en.children[e];g||(g=c.__.en.children[e]=new I(e,c.__.en)),a.__.emit_tree.children[b]=g,d(a,qc,{}),d(a,pc,{}),a[pc][b]=null,a[qc][b]=g,f(a,b,function(){return this.__.jarray[this.__.index]},function(a){this.__.jarray[this.__.index]=a},!1,!0)}function ub(a,b){this.ele=a,this.used=!1,this.env=b}function vb(a,b,c,d,e,f){this.ele=a,this.cmt=document.createComment(a.outerHTML),this.env=e,this.expr=f,this.attr=b,this.key=d,this.module=c,this.frag=document.createDocumentFragment();var g=ab(e,f,function(a,b){var c=a[0];"child"!==c.type&&b.update(a[0].cur_value)},this,10);g.compare=!1,this.val=g.cur_value,this.items=[],this.index_map=new Map,y(this.cmt,a),z(a),this.render()}function wb(a,b,c){a.$prop={$index:b,$first:0===b,$odd:b%2!==0,$even:b%2===0,$last:b===c-1,$middle:0!==b&&b!==c-1}}function xb(a,b,c){var d=a.get(b);d||(d=[],a.set(b,d)),d.push(c)}function yb(a,b,c,d){var e=b.removeNamedItem("j-repeat"),f=e.value,g=Cb(f,!0);if("in"!==g.type)throw"j-repeat format wrong!";new vb(a,b,c,g.nodes[0],d,g.nodes[1])}function zb(a,b,c,d){var e,f,g,h=a.__.listeners;for(e in h){f=h[e].var_tree;for(g in f)g===b?f[d]=f[g]:c.test(g)&&(f[g.replace(b,d)]=f[g])}for(var i in a.__.children)zb(a.__.children[i],b,d)}function Ab(a,b){this.__jing0210node__=!0,this.type=a,this.nodes=b?b:[],this.parent=null;for(var c=0;c<this.nodes.length;c++)this.nodes[c].parent=this;this.value=null,this.cached=!1,this.need_cached=!0}function Bb(c,d,e){c.prototype._exec=d,e&&b(c.prototype,e),a(c,Ab)}function Cb(a,b){Dc=!1,Ec=null,Fc=b?!0:!1,Zb(a),Gb(),Hb();var c;return 0===Bc.length?c=new Sb:1===Bc.length?c=Bc[0]:(c=new Ab("root",v(Bc)),c.need_cached=Fc),Bc.length=0,null!==Ec&&("emp"===c.type||"root"===c.type?Db():c=new Ub(Ec,c)),c}function Db(){throw Bc=[],Cc=[],"parse error"}function Eb(a){switch(a){case";":Hb();break;case"(":Dc&&(Fb("F"),Cc.push("A"),Mb(new Sb)),Cc.push("(");break;case"[":Dc?(Fb("[]"),Cc.push("(")):(Cc.push("A"),Mb(new Sb),Cc.push("("));break;case")":case"]":Hb("(");break;case"+":case"-":case"++":case"--":Fb(Dc?"#"+a:a+"#");break;default:Fb(a)}Dc=")"===a||"]"===a}function Fb(a){for(var b,c,d=Gc[a];Cc.length>0&&(b=Cc[Cc.length-1],c=Gc[b],d[0]<c[0]||d[0]===c[0]&&0===d[1]);)Cc.pop(),Jb(b);Cc.push(a)}function Gb(){for(Yb();!Jc;){switch(Hc){case"var":switch(Ic){case"true":case"false":Mb(new Rb("true"===Ic)),Dc=!0;break;case"in":if(0!==Cc.length||1!==Bc.length||"variable"!==Bc[0].type||null!==Ec)throw"grammar wrong: in";Ec=Bc.pop().var_name,Dc=!1;break;default:Mb(new Xb(Ic)),Dc=!0}break;case"num":Mb(new Rb(Number(Ic))),Dc=!0;break;case"str":Mb(new Rb(Ic.substring(1,Ic.length-1))),Dc=!0;break;case"op":Eb(Ic)}Yb()}}function Hb(a){for(var b=null;Cc.length>0&&(b=Cc.pop(),!a||b!==a);)Jb(b)}function Ib(){var a=Lb(),b=Lb(),c="."===Kb();if("array"===a.type){for(var d=!0,e=0;e<a.nodes.length;e++)if(!Nb(a.nodes[e])){d=!1;break}d&&(a=new Rb(a._exec()))}else if(!Nb(a))throw"parse_deal_op_F: something strange wrong.";c&&"variable"===b.type&&(b=new Rb(b.var_name));var f=new Tb(null,b,a);c&&(Cc.pop(),a=Lb(),Nb(a)&&Nb(f.nodes[1])&&Nb(f.nodes[2])?f=new Rb(a.value[f.nodes[1].value].apply(a.value,f.nodes[2].value)):(f.nodes[0]=a,a.parent=f)),Mb(f)}function Jb(a){var b,c,d;switch(a){case"F":Ib();break;case"A":for(b=Lb(),d=new Ob([]),c=!0;"empty"!==b.type;)d.nodes.unshift(b),b.parent=d,Nb(b)||(c=!1),b=Lb();c&&(d=new Rb(d._exec())),Mb(d);break;case",":break;case"[]":c=Lb(),b=Lb(),d=Nb(b)&&Nb(c)?new Rb(b.value[c.value]):new Vb(b,c),Mb(d);break;case".":c=Lb(),b=Lb(),c="variable"===c.type?new Rb(c.var_name):c,d=Nb(b)&&Nb(c)?new Rb(b.value[c.value]):new Vb(b,c),Mb(d);break;case"?":case":":c=Lb(),b=Lb(),Mb(new Qb(a,b,c));break;case"++#":case"--#":case"#++":case"#--":case"+#":case"-#":case"!":case"~":b=Lb(),d=new Pb(a,b),Nb(b)&&(d=new Rb(d.exec())),Mb(d);break;case"=":case"+=":case"-=":case"*=":case"/=":case"%=":case">>=":case">>>=":case"<<=":case"&=":case"^=":case"|=":c=Lb(),b=Lb(),d=new Wb(a,b,c),Mb(d);break;case"#+":case"#-":case"*":case"/":case"%":case"<<":case">>":case">>>":case"==":case"===":case">":case"<":case"&":case"&&":case"|":case"||":case"!=":case"!==":case"^":c=Lb(),b=Lb(),d=new Pb(a,b,c),Nb(b)&&Nb(c)&&(d=new Rb(d.exec())),Mb(d)}}function Kb(){return Cc.length>0?Cc[Cc.length-1]:null}function Lb(){return 0===Bc.length&&Db(),Bc.pop()}function Mb(a){a.need_cached=Fc,Bc.push(a)}function Nb(a){return"constant"===a.type}function Ob(a){this.base("array",s(a)?a:[a])}function Pb(a,b,c){this.base("calc",c?[b,c]:[b]),this.operator=a}function Qb(a,b,c){var d=[b];"?"===a&&"condition"===c.type?[].push.apply(d,c.nodes):d.push(c),this.base("condition",d)}function Rb(a){this.base("constant",[]),this.value=a,this.cached=!0}function Sb(){this.base("empty")}function Tb(a,b,c){this.base("function",[a?a:new Sb,b,c])}function Ub(a,b){this.base("in",[a,b])}function Vb(a,b){this.base("property",[a,b])}function Wb(a,b,c){this.op=a,this.base("set",[b,c])}function Xb(a){this.base("variable",[]),this.var_name=a}function Yb(){if(!Jc){var a=Lc.exec(Kc);if(!a)return void(Jc=!0);Ic=a[0];var b=Ic.charCodeAt(0);Hc=39===b||34===b?"str":b>=48&&57>=b?"num":b>=97&&122>=b||b>=65&&90>=b||36===b||95===b?"var":"op"}}function Zb(a){Kc=a,Lc.exec(""),Jc=!1}function $b(a){return a.id||(a.id="j.ele."+(Nc++).toString(36)),a.id}function _b(a){a.__is_p_stoped=!1,a.stopPropagation=function(){this.__is_p_stoped=!0}}function ac(a){return a.__is_p_stoped===!0}function bc(a){var b,c,d,f,g=a.type,h=a.target||a.srcElement||a.originalTarget,i=Mc.on;if(e(i,g))for(b=i[g],_b(a);!ac(a)&&h;){if(d=h.id,d&&e(b,d))for(c=b[d],f=0;f<c.length;f++)c[f].call(h,a);h=h.parentElement}}function cc(a,b,c){var d,f=$b(a),g=Mc.on;e(g,b)?d=g[b]:(d=g[b]={},x(document.body,b,bc));var h;h=e(d,f)?d[f]:d[f]=[],h.push(c)}function dc(a){var b=/^\s*(\w+)\s*:(.+)$/.match(a);return null===b?null:{on:b[1],expr:b[2]}}function ec(a,c){d(this,"name",a),d(this,"options",{direct:"s2c",type:"array"}),b(this.options,c);var e={};d(this,"__",e),e.listeners={change:[]};var f=this.options.type;e.value="object"===f?{}:"array"===f?[]:""}function fc(){for(var a,b=Pc,c=0;c<b.length;c++)a=b[c],a.pos.parentNode.insertBefore(a.ele,a.pos),a.pos=null,a.ele=null,delete b[c];b.length=0}function gc(a,b,c,d,e){lb(c);var f=c.link_func;f(b,c.module,d,a,e,c.name)}function hc(a,b,c,d){var e,f,g,h=d;if(f=b.getNamedItem("j-async-env"),null!==f)return void nb(a,b,c,h);if(f=b.getNamedItem("j-include"),null!==f)return void qb(a,b,c,h);if(f=b.getNamedItem("j-repeat"),null!==f)return void yb(a,b,c,h);for(f=b.getNamedItem("j-directive-name"),e=0;e<b.length;e++)f=b[e],g=wc[f.name],g&&gc(a,c,g,h,f.value);f=b.getNamedItem("j-env"),null!==f&&(h=d.$child(f.value),ob(a,b,c,h));var i=a.childNodes;for(e=0;e<i.length;e++){var j=i[e];ic(j,c,h)}}function ic(a,b,c){switch(a.nodeType){case 1:hc(a,a.attributes,b,c),C(a,"j-cloak")&&D(a,"j-cloak");break;case 3:kc(a,c)}}function jc(a){for(var b,c=0,d=[];null!==(b=Qc.exec(a));)b.index>c&&d.push(new Rb(a.substring(c,b.index))),c=b.index+b[0].length,d.push(Cb(b[1],!0));if(0===d.length)return null;if(c<a.length&&d.push(new Rb(a.substring(c))),1===d.length)return d[0];var e,f=d[0];"constant"===f.type&&h(f.value)||(d.unshift(new Rb("")),f=d[0]);for(var g=1;g<d.length;g++)e=d[g],f="constant"===f.type&&"constant"===e.type?new Rb(f.value+e.value):new Pb("#+",f,e);return f}function kc(a,b){var c=a.textContent,d=jc(c);if(null!==d){if("constant"===d.type)return void(a.textContent=d.value);var e=ab(b,d,lc,{ele:a},10);a.textContent=e.cur_value}}function lc(a,b){b.ele.textContent=a[0].cur_value}var mc=E.prototype;f(mc,"$name",function(){return this.__.name}),f(mc,"$children",function(){return this.__.children}),f(mc,"$parent",function(){return this.__.parent}),d(mc,"$parse",function(a){return Cb(a)}),f(mc,"$root",function(){return this.__.parent?this.__.parent.$root:this}),d(mc,"$destroy",function(){var a;for(a in this.__.children)this.__.children[a].$destroy();this.__.children=null,this.__.parent=null,this.__.emit_tree=null;var b=this.__.listeners;for(a in b)$(b[a]),b[a]=null;this.__.listeners=null}),d(mc,"$child",function(a){var b=this.__.children;if(e(b,a))return b[a];var c=new E(a,this);return d(b,a,c,!1,!0),c}),d(mc,"$get",function(a){return e(this,a)?this[a]:this.__.parent?this.__.parent.$get(a):null}),d(mc,"$has",function(a){return e(this,a)?!0:this.__.parent?this.__.parent.$has(a):!1}),d(mc,"$find",function(a){return e(this,a)?this:this.__.parent?this.__.parent.$find(a):void 0}),d(mc,"$set",function(a,b){e(this,a)?this[a]=b:this.__.parent&&this.__.parent.$set(a,b)}),f(mc,"$prop",function(){return this.__.prop},function(){F.apply(this,arguments)}),d(mc,"$bind",function(){return this.__.bind},function(){G.apply(this,arguments)}),I.prototype={_ne:function(a){this.I_emitter.notify(a),this.L_emitter.notify(a)},notify:function(){this._ne("self"),this._nc(),this.parent&&this.parent._nu()},item_notify:function(a){var b=this.children[a];b&&(b._ne("self"),b._nc()),this._nu()},_nd:function(){this._ne("parent"),this._nc()},_nc:function(){for(var a in this.children)this.children[a]._nd()},_nu:function(){this._ne("child"),this.parent&&this.parent._nu()},destroy:function(){this.I_emitter.destroy(),this.L_emitter.destroy();for(var a in this.children)this.children[a].destroy(),delete this.children[a];this.I_emitter=null,this.L_emitter=null,this.parent=null}},J.prototype={_nu:function(){},_ne:function(){},_nd:function(){},destroy:function(){for(var a in this.children)this.children[a].destroy(),delete this.children[a]}},K.prototype={reset:function(){this.listeners.length=0},notify:function(a){for(var b=0;b<this.listeners.length;b++)this.listeners[b].notify(a,this.path)},addListener:function(a){this.listeners.indexOf(a)<0&&(this.listeners.push(a),a.emitters.push(this))},destroy:function(){for(var a=0;a<this.listeners.length;a++)this.listeners[a].destroy();this.listeners.length=0}},L.prototype={notify:function(a){null!==this.tm&&(clearTimeout(this.tm),this.tm=null),this.et=a,this.tm=setTimeout(this.handler,0)},deal:function(){this.tm=null,this.callBase("notify",this.et)},destroy:function(){null!==this.tm&&(clearTimeout(this.tm),this.tm=null),this.callBase("destroy")}},a(L,K);var nc=N.prototype;q(["push","pop","shift","unshift","splice"],function(a){d(nc,a,function(){var b=Array.prototype[a],c=b.apply(this.__.array,arguments);return M(this,!0),this.__.en.notify(),c})}),q(["join","indexOf","fill","find"],function(a){d(nc,a,function(){return Array.prototype[a].apply(this.__.array,arguments)})}),d(nc,"slice",function(){return new N(Array.prototype.slice.apply(this.__.array,arguments),new I("emp",this.__.en))}),d(nc,"set",function(a,b){e(this,a)?this[a]=b:(this.__.array[a]=b,this.__.en.notify())}),d(nc,"get",function(a){return this.__.array[a]}),f(nc,"length",function(){return this.__.array.length},function(a){this.__.array.length=a,M(this,!0),this.__.en.notify()}),d(nc,"filter",function(a){var b=this.__.array;if(!a||0===b.length)return this;var c=r(b,a);return c.length===b.length?this:new N(c,this.__.en)}),d(nc,"sort",function(a){var b=this.__.array.sort(a);return new N(b,this.__.en)}),d(nc,"destroy",function(){this.__.array.length=0,this.__.en=null}),d(nc,"forEach",function(a){var b,c=this.__.array,d=c.length;for(b=0;d>b;b++)a(c[b],b)});var oc=0;O.prototype={destroy:function(){this.handler=null,this.data=null,this.emitters.length=0,this.emitters=null},notify:function(){},_deal:function(){}},P.prototype={notify:function(a,b){null!==this.tm&&(clearTimeout(this.tm),this.tm=null),this.changes.push(b),this.tm=setTimeout(this.dg,this.lazy)},destroy:function(){this.callBase("destroy"),this.changes=null,null!==this.tm&&(clearTimeout(this.tm),this.tm=null),this.dg=null}},a(P,O),Q.prototype={_init:function(a,b,c){this.expr=b,this.var_tree=a,this.env=c,this.pre_value=null,this.cur_value=null},notify:function(a,b){var c=this.var_tree[b];c&&(T(c),this._deal())},_deal:function(){this.cur_value=this.expr.exec(this.env),(t(this.cur_value)||this.cur_value!==this.pre_value)&&(this.handler([{type:"expr",pre_value:this.pre_value,cur_value:this.cur_value}],this.data),this.pre_value=this.cur_value)},destroy:function(){this.callBase("destroy"),S(this)}},a(Q,O),R.prototype={_deal:function(){var a,b,c,d;for(a=0;a<this.changes.length;a++)if(b=this.changes[a],c=this.var_tree[b])for(d=0;d<c.length;d++)c[d].cached=!1,T(c[d]);this.changes.length=0,Q.prototype._deal.call(this)},destroy:function(){this.callBase("destroy"),S(this)}},a(R,P);var pc="__$jing.0210.prop$__",qc="__$jing.0210.emit$__";d(mc,"$unwatch",function(a){var b=this.__.listeners,c=b[a];c&&(delete b[a],$(c))}),d(mc,"$watch",function(a,b,c,d){function f(a){if(0===a){var b=new Xb(l[0]);return i[l.join(".")]=[b],b}return new Vb(f(a-1),new Rb(l[a]))}if("function"!=typeof b)throw new Error("$watch need function");if(k(a)&&e(a,"__jing0210node__"))return ab.call(this,this,a,b,c,d);if(!h(a)||!/^[\w\d]+(?:(?:\.[\w\d]+)|(?:\[\s*\d+\s*\]))*$/.test(a))throw new Error("$watch wrong format");var g=d!==!1,i={},l=Z(a),m=f(l.length-1),n=g?new R(i,m,this,b,c,j(d)?d:0):new Q(i,m,this,b,c);return Y(this,l,n,g),this.__.listeners[n.id]=n,n.cur_value=n.pre_value=m.exec(this),n.id});var rc={},sc=new bb("jing",null),tc=bb.prototype;d(tc,"require",function(a){return cb(a,this)}),f(tc,"path",function(){return this.parent?this.parent.path+"."+this.name:this.name}),f(tc,"root",function(){return this.parent?this.parent.root:this}),d(tc,"factory",function(a,b){var c;if(b){this.__.factories.hasOwnProperty(a)&&g(a,":factory has been exists. override!");var d="function"==typeof b;return c={state:d?0:1,inst:d?null:b,func:d?b:null},this.__.factories[a]=c,this}if(c=this.__.factories[a],!c)return g(a,": factory not found!"),null;if(0===c.state)c.state=999,c.inst=c.func(this),c.state=1;else if(999===c.state)throw'factory "'+a+'" of Module "'+this.name+'" is loading. 可能的原因是产生了循环依赖。';return c.inst}),d(tc,"env",function(a,b){var c=this.__.controllers;return b?"function"==typeof b?(d(c,a,new fb(this,a,b)),this):(g("controller must be function"),this):c[a]}),d(tc,"data",function(a,b){var c=this.__.datasources;if("function"!=typeof b){var d=c[a];if(!d)throw'Data Source "'+a+'" not found.';return 0===d.state&&(d.inst=new ec(a,d.func(this)),d.state=1),d.inst.value}c[a]={state:0,func:b,inst:null}});gb.prototype;d(tc,"directive",function(a,b){if(!i(b))throw new Error("directive need function");return mb(a,b),this});var uc={},vc=!1;l(function(){vc||(vc=!0)}),d(tc,"drive",function(a){if(this.parent)throw'function "drive" can only be applied to root Module';return h(a)&&(a=document.querySelector(a)),jb(a),vc&&hb(),this}),d(tc,"init",function(a){if(this.parent)throw'function "init" can only be applied to root Module';return"function"==typeof a&&this.__.runs.push(a),this}),d(tc,"conf",function(a){for(var b in a)this.__.config[b]=a[b];return this});var wc={},xc={};l(function(){var a=A("*[j-app]");0!==a.length&&(q(a,function(a){var b=B(a,"j-app"),c=db(b);jb(c,a)}),hb())}),mb("j-class",function(){function a(a,b,c){a.className=(a.className.replace(b.trim(),"")+" "+c).trim()}return function(b,c,d,e,f){var g=Cb(f,!0),h=ab(d,g,function(b,c){a(c,b[0].pre_value,b[0].cur_value)},e,10);a(e,"",h.cur_value)}}),mb("j-if",function(){return function(){throw"j-if has not been implemented"}});var yc=pb.prototype;yc.run=function(a){o({url:a,method:"get",type:"text",success:c(this,this.success),error:c(this,this.error)})},yc.success=function(a){var b,c=this.ele,d=c.parentNode,e=document.createElement("div"),f=document.createDocumentFragment(),g=e.childNodes,h=g.length;for(e.innerHTML=a,b=0;h>b;b++)ic(g[b],this.module,this.env),f.appendChild(g[b]);d.insertBefore(f,c),d.removeChild(c)},yc.error=function(){this.ele.innerHTML='<p class="j-include-error">Error at j-include.</p>'},yc.destroy=function(){this.ele=null,this.module=null,this.env=null};var zc=rb.prototype;zc.change=function(){this.val=this.ele[this.val_key],this.expr.set(this.env,this.val)},zc.update=function(a){this.val!==a&&(this.ele[this.val_key]=a,this.val=a)},zc.destroy=function(){this.ele=null,this.expr.destroy(),this.expr=null},mb("j-model",function(){return function(a,b,c,d,e){sb(a,b,c,d,e,!0)}}),mb("j-value",function(){return function(a,b,c,d,e){sb(a,b,c,d,e,!1)}}),mb("j-on",function(){return function(a,b,c,d,e){var f=dc(e);if(!f)throw"j-on format wrong.";var g=Cb(f.expr);cc(d,f.on,function(){g.exec(c)})}}),mb("j-enter",function(){return function(a,b,c,d,e){var f=Cb(e);cc(d,"keydown",function(a){13===a.keyCode&&f.exec(c)})}}),q(["j-click","j-dblclick","j-mousedown"],function(a){var b=a.substring(2);mb(a,function(){return function(a,c,d,e,f){var g=Cb(f);cc(e,b,function(){g.exec(d)})}})}),q(["j-blur","j-focus"],function(a){var b=a.substring(2);mb(a,function(){return function(a,c,d,e,f){var g=Cb(f);x(e,b,function(){g.exec(d)})}})}),mb("j-change",function(){return function(a,b,c,d,e){var f=Cb(e);x(d,"change",function(){setTimeout(function(){f.exec(c)})})}});var Ac=vb.prototype;Ac.update=function(a){function b(a){var b=i.get(a);return b&&0!==b.length?b.pop():-1}function c(a){for(var b=a+1;b<h.length;b++)if(h[b])return b;return-1}function d(a,b){var c=h[a],d=h[b];w(c.ele,d.ele),h[a]=d,h[b]=c}if(!t(a))throw new Error("only support Array in j-repeat.");var e,f,g,h=this.items,i=this.index_map,j=new Map,k=a.__.array,l=new Int32Array(k.length);for(e=0;e<k.length;e++)f=b(k[e]),f>=0&&(l[e]=f+1,h[f].used=!0);for(e=0;e<h.length;e++)g=h[e],g.used||(z(g.ele),g.env.$destroy(),g.ele=null,g.env=null,delete h[e]);var m,n,o=c(-1),p=0>o?this.cmt:h[o].ele,q=new Array(k.length),r=null;for(e=0;e<k.length;e++)f=l[e]-1,0>f?(m=H(this.env,e),n=this.ele.cloneNode(!0),g=new ub(n,m),wb(m,e,k.length),tb(m,this.key,a,e),hc(n,this.attr,this.module,m),fc(),zb(m,this.key,new RegExp("^"+this.key+"\\."),a.__.en.children[e].path),r=r?r:document.createDocumentFragment(),r.appendChild(n)):(r&&(y(r,p),r=null),f>o&&d(f,o),o=c(o),p=0>o?this.cmt:h[o].ele,g=h[f],g.env.__.index=e,g.env.__.jarray=a,wb(g.env,e,k.length)),g.used=!1,q[e]=g,xb(j,k[e],e);r&&(y(r,p),r=null),i.clear(),h.length=0,this.items=q,this.index_map=j},Ac.render=function(){if(!t(this.val))throw new Error("only support Array in j-repeat.");for(var a,b,c=this.val.__.array,d=document.createDocumentFragment(),e=0;e<c.length;e++)a=this.ele.cloneNode(!0),b=H(this.env,e),wb(b,e,c.length),tb(b,this.key,this.val,e),hc(a,this.attr,this.module,b),zb(b,this.key,new RegExp("^"+this.key+"\\."),this.val.__.en.children[e].path),d.appendChild(a),this.items.push(new ub(a,b)),xb(this.index_map,c[e],e);Pc.push({ele:d,pos:this.cmt})},function(){function a(a,b){a.style.setProperty("display",b?"":"none","")}function b(b,c,d,e,f,g){var h=Cb(f),i=ab(d,h,g?function(b,c){a(c.ele,b[0].cur_value?!0:!1)}:function(b,c){a(c.ele,b[0].cur_value?!1:!0)},{ele:e},10),j=i.cur_value,k=g?j?!0:!1:j?!1:!0;a(e,k)}mb("j-show",function(){return function(a,c,d,e,f){b(a,c,d,e,f,!0)}}),mb("j-hide",function(){return function(a,c,d,e,f){b(a,c,d,e,f,!1)}})}(),mb("j-style",function(){function a(a){var b=a.replace(/[-_](\w)/g,function(a,b){return b.toUpperCase()});if(b in c.style)return a;for(var f,g=b.charAt(0).toUpperCase()+b.slice(1),h=e.length;h--;)if(f=e[h]+g,f in c.style)return d[h]+a;return!1}function b(b,c){var d,e,g,h;if(k(c))for(d in c){if(e=a(d),!e)return;g=c[d],h=f.test(g),h?(g=g.replace(f,""),b.style.setProperty(e,g,"important")):b.style.setProperty(e,g,"")}else b.style=s(c)?c.join(";"):c}var c=document.createElement("div"),d=["-webkit-","-moz-","-ms-"],e=["Webkit","Moz","ms"],f=/!important;?$/;return function(a,c,d,e,f){var g=jc(f);null===g&&(g=Cb(f,!0));var h=ab(d,g,function(a,c){b(c.ele,a[0].cur_value)},{ele:e},10);b(e,h.cur_value)}}),Ab.prototype={increment:function(a){return this.exec(a)},_exec:function(a){return this.nodes[0].exec(a)},exec:function(a){if(this.need_cached){var b;return this.cached?b=this.value:(b=this._exec(a),this.value=b,this.cached=!0),b}return this._exec(a)},set:function(){},destroy:function(){for(var a=this.nodes,b=0;b<a.length;b++)a[b].destroy(),a[b]=null;a.length=0,this.nodes=null}};var Bc=[],Cc=[],Dc=!1,Ec=null,Fc=!0,Gc={A:[400,0],".":[200,0],"[]":[200,0],F:[300,0],"#++":[90,0],"#--":[90,0],"!":[80,1],"~":[80,1],"+#":[80,1],"-#":[80,1],"++#":[80,1],"--#":[80,1],"*":[70,0],"/":[70,0],"%":[70,0],"#+":[60,0],"#-":[60,0],"<<":[50,0],">>":[50,0],">>>":[50,0],"<":[40,0],">":[40,0],"<=":[40,0],">=":[40,0],"==":[30,0],"===":[30,0],"!=":[30,0],"!==":[30,0],"&":[20,0],"^":[19,0],"|":[18,0],"&&":[17,0],"||":[16,0],"?":[15,1],":":[15,1],"=":[10,1],">>=":[10,1],"<<=":[10,1],">>>=":[10,1],"+=":[10,1],"-=":[10,1],"*=":[10,1],"/=":[10,1],"%=":[10,1],"&=":[10,1],"^=":[10,1],"|=":[10,1],"->":[-10,0],",":[-20,0],"(":[-1e3,0]};Bb(Ob,function(a){for(var b=[],c=0;c<this.nodes.length;c++)b.push(this.nodes[c].exec(a));return b},{concat:function(a,b){var c="array"===a.type?a.nodes:[a];b?[].unshift.apply(this.nodes,c):[].push.apply(this.nodes,c)}}),Bb(Pb,function(a){var b=this.nodes;switch(this.operator){case"#+":return b[0].exec(a)+b[1].exec(a);case"#-":return b[0].exec(a)-b[1].exec(a);case"+#":return 0+b[0].exec(a);case"-#":return 0-b[0].exec(a);case"*":return b[0].exec(a)*b[1].exec(a);case"/":return b[0].exec(a)/b[1].exec(a);case"#++":return b[0].increment(a,!0,!1);case"#--":return b[0].increment(a,!1,!1);case"++#":return b[0].increment(a,!0,!1);
case"--#":return b[0].increment(a,!1,!0);case"!":return!b[0].exec(a);case">":return b[0].exec(a)>b[1].exec(a);case"<":return b[0].exec(a)<b[1].exec(a);case">>":return b[0].exec(a)>>b[1].exec(a);case">>>":return b[0].exec(a)>>>b[1].exec(a);case"<<":return b[0].exec(a)<<b[1].exec(a);case"==":return b[0].exec(a)==b[1].exec(a);case"===":return b[0].exec(a)===b[1].exec(a)}}),Bb(Qb,function(a){var b=this.nodes;return b[0].exec(a)?b[1].exec(a):b[2].exec(a)}),Bb(Rb,function(){return this.value},{exec:function(){return this.value},increment:function(a,b){return this.value+(b?1:0)}}),Bb(Sb,function(){return null}),Bb(Tb,function(a){var b,c,d=this.nodes[1].exec(a);if("empty"===this.nodes[0].type?(b=d,c=a):(c=this.nodes[0].exec(a),b=c[d]),i(b)){var e=this.nodes[2].exec(a);return b.apply(c,e)}},{toString:function(){return"func"}}),Bb(Ub,function(){}),Bb(Vb,function(a){var b=this.nodes[0].exec(a),c=this.nodes[1].exec(a);return b?b[c]:null},{increment:function(a,b,c){var d=this.nodes[0].exec(a),f=this.nodes[1].exec(a);if(null!==d&&e(d,f)){var g=d[f],h=g+(b?1:-1);return d[f]=h,c?h:g}return null},set:function(a,b){var c=this.nodes[0].exec(a),d=this.nodes[1].exec(a);c[d]=b}}),Bb(Wb,function(a){var b=this.nodes[1].exec(a),c=this.nodes[0].exec(a),d=b;switch(this.op){case"=":break;case">>=":d=c>>b;break;case"<<=":d=c<<b;break;case">>>=":d=c>>>b;break;case"+=":d=c+b;break;case"-=":d=c-b;break;case"*=":d=c*b;break;case"%=":d=c%b;break;case"/=":d=c/b;break;case"&=":d=c&b;break;case"^=":d=c^b;break;case"|=":d=c|b}return this.nodes[0].set(a,d),d}),Bb(Xb,function(a){return a.$get(this.var_name)},{increment:function(a,b,c){var d=this.exec(a),e=d+(b?1:-1);return a.$set(this.var_name,e),c?e:d},set:function(a,b){a.$set(this.var_name,b)}});var Hc="",Ic="",Jc=!1,Kc="",Lc=new RegExp("(?:\\+(?:\\+?)(?:=?))|(?:\\-(?:\\-?)(?:=?))|(?:\\*(?:=?))|(?:\\/(?:=?))|(?:%(?:=?))|(?:\\!(?:={0,2}))|(?:~(?:=?))|(?:&(?:&|=)?)|(?:\\|(?:\\||=)?)|(?:\\^(?:=?))|(?:>(?:>{0,2})(?:=?))|(?:<(?:<?)(?:=?))|(?:=(?:={0,2}))|\\(|\\)|\\[|\\]|\\{|\\}|\\.|\\?|\\:|;|,|(?:\"[^\"]*\")|(?:'[^']*')|(?:\\d+(?:\\.\\d+)?)|(?:[a-zA-Z$_][a-zA-Z0-9$_]*)","g"),Mc={on:{},be:{},af:{}},Nc=0,Oc=ec.prototype;d(Oc,"get",function(){return this.__.value}),d(Oc,"ping",function(){}),d(Oc,"update",function(){}),d(Oc,"on",function(a,b){if("function"!=typeof b)throw"DataSource on need function";"change"===a&&this.listeners.change.push(b)}),d(Oc,"bind",function(){});var Pc=[],Qc=/\{\{(.+?)\}\}/g;jing={},jing.module=db,jing.require=cb,jing.directive=function(a){var b=eb(a,!1);return b?b[0].directive(b[1]):(g(a,": directive not found. no module."),null)},jing.factory=function(a){var b=eb(a,!1);return b?b[0].factory(b[1]):(g(a,": factory not found. no module."),null)},jing.ready=l,jing.env=ib,jing.JSONStringify=m,jing.JSONParse=n,jing.each=q,jing.map=p,jing.filter=r,jing.defineProperty=d,jing.defineGetterSetter=f,function(){var a=document.createElement("style");document.head.appendChild(a);var b=a.sheet;b.insertRule("[j-cloak] { display : none !important;}",0)}()}();