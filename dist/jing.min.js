/*** jing.js(https://github.com/YuhangGe/jing.js) ***/
!function () {
    function a(a, b) {
        if ("undefined" == typeof a || "undefined" == typeof b)throw console.trace(), "inherit error!";
        for (var c in b.prototype) {
            var d = a.prototype[c];
            "undefined" == typeof d && (a.prototype[c] = b.prototype[c])
        }
        if (a.__base_objects__ = [], a.__base_objects__.push(b), "undefined" != typeof b.__base_objects__)for (var e = 0; e < b.__base_objects__.length; e++)a.__base_objects__.push(b.__base_objects__[e]);
        a.prototype.base = function (b) {
            var c = null, d = void 0;
            return "undefined" == typeof this.__inherit_base_deep__ ? this.__inherit_base_deep__ = 0 : this.__inherit_base_deep__++, c = a.__base_objects__[this.__inherit_base_deep__], d = "undefined" == typeof b || null == b ? c.call(this) : b instanceof Array == !0 ? c.apply(this, b) : c.apply(this, [].slice.call(arguments)), this.__inherit_base_deep__--, d
        }, a.prototype.callBase = function (b, c) {
            var d = null, e = void 0;
            "undefined" == typeof this.__inherit_deep__ ? this.__inherit_deep__ = 0 : this.__inherit_deep__++, d = a.__base_objects__[this.__inherit_deep__];
            var f = d.prototype[b];
            if ("function" != typeof f)throw"There is no method:" + b + " in baseClass";
            return e = "undefined" == typeof c || null === c ? f.call(this) : c instanceof Array == !0 ? f.apply(this, c) : f.apply(this, [].slice.call(arguments, 1)), this.__inherit_deep__--, e
        }
    }

    function b(a, b) {
        for (var c in b)a[c] = b[c]
    }

    function c(a, b) {
        return function () {
            b.apply(a, arguments)
        }
    }

    function d(a, b, c) {
        if ("object" == typeof b)for (var d in b)a.style[d] = b[d]; else a.style[b] = c
    }

    function e(a, b, c) {
        return "undefined" == typeof c ? a.getAttribute(b) : void a.setAttribute(b, c)
    }

    function f(a, b) {
        if (!(b instanceof Array))return a.hasAttribute(b);
        for (var c = 0; c < b.length; c++)if (!a.hasAttribute(b[c]))return !1
    }

    function g(a, b) {
        return "undefined" == typeof b ? a.__JING_BIND_DATA__ : void(a.__JING_BIND_DATA__ = b)
    }

    function h(a, b) {
        for (var c = 0; c < a.length; c++)if (b(a[c], a[c], c) === !1)return
    }

    function i(a, b, c, d, e) {
        Object.defineProperty(a, b, {value: c, writable: d ? !0 : !1, enumerable: e ? !0 : !1})
    }

    function j(a, b) {
        return a.hasOwnProperty(b)
    }

    function k(a, b, c, d, e, f) {
        var g = {configurable: e ? !0 : !1, enumerable: f ? !0 : !1};
        c && (g.get = c), d && (g.set = d), Object.defineProperty(a, b, g)
    }

    function l(a, b, c) {
        a.addEventListener(b, c)
    }

    function m(a, b) {
        setTimeout(a, b)
    }

    function n() {
        console.log.apply(console, arguments)
    }

    function o(a) {
        return a instanceof Array
    }

    function p(a, b) {
        if (!b)return a;
        for (var c in b)a[c] = b[c];
        return a
    }

    function q(a, b) {
        var c = {};
        i(this, "__", c), i(c, "watchers", {}), i(this, "$$", {}), i(this, "$name", a), i(this, "$children", {}), i(this, "$parent", b ? b : null)
    }

    function r(a) {
        var b = this.$parent ? this.$parent.name + "." + S++ : "jing.scope." + S++, c = new q(b, a);
        return a && i(a.$children, b, c, !1, !0), c
    }

    function s(a, b, c) {
        i(this, "scope", a), i(this, "children", {}), i(this, "parent", c ? c : null), i(this, "listeners", []), i(this, "name", b), this.old_value = a[b]
    }

    function t(a, b) {
        var c = {};
        i(this, "__", c), i(c, "factories", {}), i(c, "directives", {}), i(c, "runs", []), i(c, "controllers", {}), i(c, "datasources", {}), i(c, "config", {data_source_url: "datasource"}), i(this, "parent", b ? b : null), i(this, "children", {}), i(this, "name", a)
    }

    function u(a, b) {
        for (var c, d = a.split("."), e = W, f = 0; f < d.length - 1; f++) {
            if (c = e[d[f]], !c)throw"require error: module " + a + " not found.";
            e = c.children
        }
        var g = c ? c : b, h = d[d.length - 1], i = g.factory(h);
        if (!i)throw"require error: factory " + a + " not found.";
        return i
    }

    function v(a) {
        for (var b, c = a.split("."), d = W, e = null, f = 0; f < c.length - 1; f++)b = d[c[f]], b || (b = new t(c[f], e), i(d, c[f], b, !1, !0)), d = b.children, e = b;
        var g = c[c.length - 1];
        return j(d, g) ? d[g] : (b = new t(g, e), i(d, g, b), b)
    }

    function w(a, b) {
        var c = a.trim().split(".");
        if (!b && c.length <= 1)return null;
        for (var d, e = b ? c.length : c.length - 1, f = 0; e > f; f++)if (d = 0 === f ? W[c[f]] : d.children[c[f]], !d)return null;
        return b ? d : [d, c[c.length - 1]]
    }

    function x(a, b, c) {
        this.name = b, this.module = a, this.func = c
    }

    function y(a, b, c, d) {
        this.name = b, this.module = a, this.state = 0, this.scope_type = "function" == typeof c ? Y : c, this.func = "function" == typeof c ? c : d, this.link_func = null
    }

    function z(a) {
        if (0 === a.state) {
            a.state = 999;
            var b = a.func(a.module);
            a.state = 1, a.link_func = b
        }
    }

    function A(a) {
        bb[a.name] = a, cb[a.module.path + "." + a.name] = a
    }

    function B(a, b, c) {
        A(new y(X, a, b, c))
    }

    function C(a, b, c) {
        this.type = a, this.nodes = b ? b : [], this.props = p({writable: !1}, c)
    }

    function D(c, d, e) {
        c.prototype.exec = d, e && b(c.prototype, e), a(c, C)
    }

    function E(a) {
        this.base("argument", [a])
    }

    function F(a, b, c) {
        this.base("calc", [b, c]), this.operator = a
    }

    function G(a) {
        this.base("constant"), this.value = a
    }

    function H() {
        this.base("empty")
    }

    function I(a, b) {
        var c = [a];
        o(b) || (b = [b]), [].push.apply(c, b), this.base("function", c, {readable: !1})
    }

    function J(a, b) {
        this.base("property", [a, b], {writable: !0})
    }

    function K(a) {
        this.base("variable", [], {writable: !0}), this.var_name = a
    }

    function L(a, b) {
        for (var c = 0; c < a.length; c++)for (var d = a[c], e = b[c], f = d.charCodeAt(0), g = d.length, h = 0, i = 1; g > i; i++)if (0 === f)e[i - 1] = d.charCodeAt(i) - 1; else {
            for (var j = d.charCodeAt(i) - 1, k = d.charCodeAt(i + 1) - 1, l = 0; j > l; l++)e[h] = k, h++;
            i++
        }
    }

    function M(a, b, c) {
        var d = e(a, fb).split(","), g = f(a, gb) ? e(a, gb).split(",") : [];
        0 === d.length;
        var h, i, j, k, l, m;
        for (h = 0; h < d.length; h++) {
            if (i = d[h].trim(), j = g[h], k = cb[i], !k)throw'directive "' + i + '" not found!';
            if (l = N(a, b, k, c, j), k.scope_type === $) {
                if (m)throw"directive with scope_type:jing.scope_types.PARENT can be occur once on one element!";
                m = l
            }
        }
        return m
    }

    function N(a, b, c, d, e) {
        z(c);
        var f = c.scope_type, g = c.link_func, h = f === Z || f === $ ? d.$child() : d;
        return g(b, c.module, h, a, e, c.name), h
    }

    function O(a, b, c) {
        var d, e, g, h, i, j;
        if (f(a, fb))j = M(a, b, c); else if (a.hasAttributes())for (g = a.attributes, d = 0; d < g.length; d++)if (e = g[d], e.name !== fb && e.name !== gb && (h = bb[e.name], h && (i = N(a, b, h, c, e.value), h.scope_type === $))) {
            if (j)throw"directive with scope_type:jing.scope_types.PARENT can be occur once on one element!";
            j = i
        }
        P(a, j ? j : c);
        var k = a.children;
        for (d = 0; d < k.length; d++)O(k[d], b, j ? j : c)
    }

    function P(a, b) {
        var c = a.childNodes;
        if (0 !== c.length)for (var d = 0; d < c.length; d++)if ("#text" === c[d].nodeName) {
            var e = c[d].textContent, f = e.match(/\{\{\s*([\w\d_]+)\s*\}\}/);
            if (f) {
                var g = b.$get(f[1]);
                if (g) {
                    c[d].textContent = e.replace(f[0], g);
                    var h = e.replace(f[0], "{{0}}");
                    b.$watch(f[1], function (a, b, c) {
                        c.ele.textContent = c.tem.replace("{{0}}", b)
                    }, {ele: c[d], tem: h})
                } else n('"' + f[1] + '" not found in scope: ' + b.$name)
            }
        }
    }

    var Q = ["push", "pop", "reverse", "shift", "sort", "unshift", "splice"], R = Array.prototype, S = 0, T = {}, U = q.prototype;
    k(U, "$root", function () {
        return this.$parent ? this.$parent.$root : this
    }), i(U, "$declare", function (a, b) {
        var c = this;
        if ("object" == typeof a)for (var d in a)c.$declare(d, a[d]); else"function" != typeof b && (b instanceof Array && (h(Q, function (d) {
            b[d] = function () {
                var b = R[d].apply(this, arguments);
                return c.$emit(a), b
            }
        }), b.$set = function (b, d) {
            this[b] = d, c.$emit(a)
        }), c.$$[a] = b, b instanceof DataSource ? k(c, a, function () {
            return c.$$[a].get()
        }, function (b) {
            c.$$[a].get() !== b && (c.$$[a].update(b), c.$emit(a))
        }, !0, !0) : k(c, a, function () {
            return c.$$[a]
        }, function (b) {
            c.$$[a] !== b && (c.$$[a] = b, c.$emit(a))
        }, !0, !0))
    }), i(U, "$child", function (a) {
        a || (a = this.$parent ? this.$parent.name + "." + S++ : "jing.scope." + S++);
        var b = this.$children;
        if (j(b, a))return b[a];
        var c = new q(a, this);
        return i(b, a, c, !1, !0), c
    }), i(U, "$get", function (a) {
        return j(this, a) ? this[a] : this.$parent ? this.$parent.$get(a) : null
    }), i(U, "$set", function (a, b) {
        if (j(this, a))this[a] = b; else {
            if (!this.$parent)throw"scope does not have declare var:" + a;
            this.$parent.set(a, b)
        }
    }), i(U, "$watch", function (a, b, c) {
        if ("function" != typeof b)return void n("$watch need function");
        a instanceof Array ? a : a.split(".");
        if (!j(this.$$, a)) {
            if (!j(this, a))return void n('"' + a + '" of scope:' + this.name + " not found!");
            var d = this[a];
            delete this[a], this.$declare(a, d)
        }
        var e = this.__.watchers;
        j(e, a) || (e[a] = new s(this, a, null)), __watch[a].push({cb: b, data: c})
    }), i(U, "$emit", function (a) {
        var b = this.__.watch, d = b[a];
        d && 0 !== d.length && m(c(this, function () {
            for (var b = 0; b < d.length; b++)d[b].cb(a, this.$$[a], d[b].data)
        }), 0)
    });
    var V = s.prototype;
    i(V, "emit", function (a) {
        for (var b, c = this.listeners, d = 0; d < c.length; d++)b = c[d], b.handler(this.old_value, a, b.data);
        var e = this.children;
        for (var f in e)e[f].emit(a[f]);
        this.old_value = a
    });
    var W = {}, X = new t("jing", null), Y = 0, Z = 1, $ = 2, _ = t.prototype;
    i(_, "require", function (a) {
        return u(a, this)
    }), k(_, "path", function () {
        return this.parent ? this.parent.path + "." + this.name : this.name
    }), k(_, "root", function () {
        return this.parent ? this.parent.root : this
    }), i(_, "drive", function (a) {
        if (this.parent)throw'function "drive" can only be applied to root Module';
        var b = new q("jing.scope." + this.path + S++);
        return T[this.path] = b, setTimeout(c(this, function () {
            for (var c = 0; c < this.__.runs.length; c++)this.__.runs[c](this, T[this.path]);
            O(a, this, b)
        }), 0), this
    }), i(_, "factory", function (a, b) {
        var c;
        if (b) {
            this.__.factories.hasOwnProperty(a) && n(a, ":factory has been exists. override!");
            var d = "function" == typeof b;
            return c = {state: d ? 0 : 1, inst: d ? null : b, func: d ? b : null}, this.__.factories[a] = c, this
        }
        if (c = this.__.factories[a], !c)return n(a, ": factory not found!"), null;
        if (0 === c.state)c.state = 999, c.inst = c.func(this), c.state = 1; else if (999 === c.state)throw'factory "' + a + '" of Module "' + this.name + '" is loading. 可能的原因是产生了循环依赖。';
        return c.inst
    }), i(_, "directive", function (a, b, c) {
        var d;
        return c ? "function" != typeof c ? void n("directive need function") : (this.__.directives.hasOwnProperty(a) && n("directive exists! override."), d = new y(this, a, b, c), this.__.directives[a] = d, A(d), this) : (d = this.__.directives[a], d ? (z(d, this), d.inst) : null)
    }), i(_, "initialize", function (a) {
        if (this.parent)throw'function "initialize" can only be applied to root Module';
        return "function" == typeof a && this.__.runs.push(a), this
    }), i(_, "config", function (a) {
        for (var b in a)j(this.__.config, b) && (this.__.config[b] = a[b]);
        return this
    }), i(_, "controller", function (a, b) {
        var c = this.__.controllers;
        return b ? "function" == typeof b ? (i(c, a, new x(this, a, b)), this) : (n("controller must be function"), this) : c[a]
    });
    var ab = x.prototype;
    ab.bind_scope = function (a, b) {
        this.func(a, b)
    }, i(_, "data", function (a, b) {
        var c = this.__.datasources;
        if ("function" != typeof b) {
            var d = c[a];
            if (!d)throw'Data Source "' + a + '" not found.';
            return 0 === d.state && (d.inst = new DataSource(a, d.func(this)), d.state = 1), d.inst.value
        }
        c[a] = {state: 0, func: b, inst: null}
    });
    var bb = (y.prototype, {}), cb = {};
    B("j-click", function () {
        return function (a, b, d, e, f) {
            var g = d[f];
            if ("function" != typeof g)throw"j-click need function.";
            l(e, "click", c(d, g))
        }
    }), B("j-ctrl", $, function () {
        return function (a, b, c, d, e) {
            var f;
            if (e.indexOf(".") >= 0) {
                var g = w(e, !1);
                if (!g)throw'j-ctrl: controller "' + e + '" not found. module not found.';
                f = g[0].controller(g[1])
            } else f = a.controller(e.trim());
            if (!f)throw'j-ctrl: controller "' + e + '" not found.';
            f.bind_scope(a, c)
        }
    }), B("j-model", function () {
        return function (a, b, c, d, f) {
            "INPUT" === d.nodeName && (g(d, c), l(d, "input", function () {
                g(this)[e(this, "j-model")] = this.value
            }), d.value = c[f], c.$watch(f, function (a, b, c) {
                c.value = b
            }, d))
        }
    }), B("j-repeat", function () {
        return function (a, b, c, e, f) {
            function h(a, b) {
                for (var c, e = a.parentNode, f = g(a), h = 0; h < b.length; h++)c = a.cloneNode(!0), d(c, "display", "block"), c.removeAttribute("j-repeat"), e.appendChild(c), f.push(c)
            }

            function i(a, b) {
                for (var c = g(a), d = 0; d < c.length; d++)c[d].parentNode.removeChild(c[d]);
                c.length = 0, h(a, b)
            }

            var j = c[f];
            return !j instanceof Array ? void n("j-repeat need Array!") : (d(e, "display", "none"), g(e, []), h(e, j), void c.$watch(f, function (a, b, c) {
                i(c, b)
            }, e))
        }
    }), C.prototype = {
        increment: function (a) {
            return this.exec(a)
        }, exec: function (a) {
            return this.nodes[0].exec(a)
        }
    };
    D(E, function (a) {
        for (var b = 0; b < this.nodes.length; b++)this.nodes[b].exec(a)
    }, {
        merge: function (a) {
            "argument" === a.type ? [].push.apply(this.nodes, a.nodes) : this.nodes.push(a)
        }
    }), D(F, function (a) {
        var b = this.nodes;
        switch (this.operator) {
            case"+":
                return b[0].exec(a) + b[1].exec(a);
            case"-":
                return b[0].exec(a) - b[1].exec(a);
            case"*":
                return b[0].exec(a) * b[1].exec(a);
            case"/":
                return b[0].exec(a) / b[1].exec(a);
            case"++":
                return b[0].increment(a, !0);
            case"--":
                return b[0].increment(a, !1);
            case"!":
                return !b[0].exec(a);
            case">":
                return b[0].exec(a) > b[1].exec(a);
            case"<":
                return b[0].exec(a) < b[1].exec(a);
            case">>":
                return b[0].exec(a) >> b[1].exec(a);
            case">>>":
                return b[0].exec(a) >>> b[1].exec(a);
            case"<<":
                return b[0].exec(a) << b[1].exec(a);
            case"==":
                return b[0].exec(a) == b[1].exec(a);
            case"===":
                return b[0].exec(a) === b[1].exec(a)
        }
    }), D(G, function () {
        return this.value
    }), D(H, function () {
        return null
    }), D(I, function () {
    }, {
        toString: function () {
            return "func"
        }
    }), D(J, function (a) {
        var b = this.nodes[0].exec(a), c = this.nodes[1].exec(a);
        return null === b ? null : j(b, c) ? b[c] : null
    }, {
        increment: function (a, b) {
            var c = this.nodes[0].exec(a), d = this.nodes[1].exec(a);
            if (null !== c && j(c, d)) {
                var e = c[d];
                return c[d] = e + (b ? 1 : -1), e
            }
            return null
        }
    }), D(K, function (a) {
        return a.$get(this.var_name)
    }, {
        increment: function (a, b) {
            var c = this.exec(a);
            return a.$set(this.var_name, c + (b ? 1 : -1)), c
        }
    });
    var db = Int32Array, eb = {
        b: new db(18),
        d: new db(18),
        c: new db(29),
        n: new db(29),
        a: new db(18),
        e: new db(256)
    };
    L(["	", "\x00", "\x00\b	\n\f\f\r\x00", "\x00\x00\x00\f\f\r\r\b		\n\r\f\x00", "\x00\x00", "\n\r	\f\b\r\r\r\n"], [eb.b, eb.d, eb.c, eb.n, eb.a, eb.e]);
    var fb = "j-directive-name", gb = "j-directive-value";
    jing = {}, jing.scope_types = {
        INHERIT: Y,
        CREATE: Z,
        PARENT: $
    }, jing.$on = l, jing.module = v, jing.require = u, jing.controller = function (a) {
        var b = w(a, !1);
        return b ? b[0].controller(b[1]) : (n(a, ": controller not found. no module."), null)
    }, jing.directive = function (a) {
        var b = w(a, !1);
        return b ? b[0].directive(b[1]) : (n(a, ": directive not found. no module."), null)
    }, jing.factory = function (a) {
        var b = w(a, !1);
        return b ? b[0].factory(b[1]) : (n(a, ": factory not found. no module."), null)
    }, jing.scope = function (a) {
        return a ? T[a] : r()
    }
}();